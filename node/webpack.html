<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.61" />
    <meta name="theme" content="VuePress Theme Hope" />
    <link rel="icon" href="/images/reader_icon_24.png"><script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?f1bf67f932d3eae9ae2837feab97bedd";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script><title>ä¸€ã€Webpack-åŸºç¡€ç¯‡ | jiyun</title><meta name="description" content="">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-0feb9a4c.css" as="style"><link rel="stylesheet" href="/assets/style-0feb9a4c.css">
    <link rel="modulepreload" href="/assets/app-bc749043.js"><link rel="modulepreload" href="/assets/framework-62102715.js"><link rel="modulepreload" href="/assets/webpack.html-387311bc.js"><link rel="modulepreload" href="/assets/webpack.html-1a7ecc75.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container has-toc"><!--[--><header class="navbar" id="navbar"><div class="navbar-start"><button type="button" class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><img class="logo" src="/images/hpcwire_logo.svg" alt="jiyun"><!----><span class="site-name hide-in-pad">jiyun</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" aria-label="é¦–é¡µ"><span class="font-icon icon iconfont icon-home" style=""></span>é¦–é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="hpcé›†ç¾¤"><span class="title"><span class="font-icon icon iconfont icon-discover" style=""></span>hpcé›†ç¾¤</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/hpc/" class="nav-link" aria-label="ä½¿ç”¨æŒ‡å—"><!---->ä½¿ç”¨æŒ‡å—<!----></a></li><li class="dropdown-item"><a href="/hpc/guide/" class="nav-link" aria-label="é›†ç¾¤ä»‹ç»"><!---->é›†ç¾¤ä»‹ç»<!----></a></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>ç®¡ç†</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hpc/admin/user.html" class="nav-link" aria-label="ç”¨æˆ·ç®¡ç†"><!---->ç”¨æˆ·ç®¡ç†<!----></a></li><li class="dropdown-subitem"><a href="/hpc/admin/onoff.html" class="nav-link" aria-label="å¼€å…³æœº"><!---->å¼€å…³æœº<!----></a></li><li class="dropdown-subitem"><a href="/hpc/admin/health.html" class="nav-link" aria-label="å¥åº·æ£€æŸ¥"><!---->å¥åº·æ£€æŸ¥<!----></a></li><li class="dropdown-subitem"><a href="/hpc/admin/quota.html" class="nav-link" aria-label="ç£ç›˜é…é¢"><!---->ç£ç›˜é…é¢<!----></a></li><li class="dropdown-subitem"><a href="/hpc/admin/gpfs.html" class="nav-link" aria-label="gpfsæ–‡ä»¶ç³»ç»Ÿ"><!---->gpfsæ–‡ä»¶ç³»ç»Ÿ<!----></a></li><li class="dropdown-subitem"><a href="/hpc/admin/scheduler.html" class="nav-link" aria-label="slurmåˆ†é…èµ„æº"><!---->slurmåˆ†é…èµ„æº<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>ä½œä¸šæäº¤</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hpc/guide/job/" class="nav-link" aria-label="ä½œä¸šè°ƒåº¦"><!---->ä½œä¸šè°ƒåº¦<!----></a></li><li class="dropdown-subitem"><a href="/hpc/guide/job/salloc.html" class="nav-link" aria-label="salloc äº¤äº’è¿è¡Œä½œä¸š"><!---->salloc äº¤äº’è¿è¡Œä½œä¸š<!----></a></li><li class="dropdown-subitem"><a href="/hpc/guide/job/sbatch.html" class="nav-link" aria-label="sbatch æäº¤ä½œä¸š"><!---->sbatch æäº¤ä½œä¸š<!----></a></li><li class="dropdown-subitem"><a href="/hpc/guide/job/scancel.html" class="nav-link" aria-label="scancel å–æ¶ˆå·²ç»æäº¤çš„ä½œä¸š"><!---->scancel å–æ¶ˆå·²ç»æäº¤çš„ä½œä¸š<!----></a></li><li class="dropdown-subitem"><a href="/hpc/guide/job/scontrol.html" class="nav-link" aria-label="scontrol æŸ¥çœ‹ä½œä¸šå…·ä½“ä¿¡æ¯"><!---->scontrol æŸ¥çœ‹ä½œä¸šå…·ä½“ä¿¡æ¯<!----></a></li><li class="dropdown-subitem"><a href="/hpc/guide/job/sinfo.html" class="nav-link" aria-label="sinfo æŸ¥çœ‹åˆ†åŒºçŠ¶æ€"><!---->sinfo æŸ¥çœ‹åˆ†åŒºçŠ¶æ€<!----></a></li><li class="dropdown-subitem"><a href="/hpc/guide/job/squeue.html" class="nav-link" aria-label="squeue æŸ¥çœ‹å·²ç»æäº¤çš„ä½œä¸š"><!---->squeue æŸ¥çœ‹å·²ç»æäº¤çš„ä½œä¸š<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>ç™»å½•</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hpc/guide/login/ssh.html" class="nav-link" aria-label="ssh æ–¹å¼ç™»å½•é›†ç¾¤"><!---->ssh æ–¹å¼ç™»å½•é›†ç¾¤<!----></a></li><li class="dropdown-subitem"><a href="/hpc/guide/login/gui.html" class="nav-link" aria-label="å›¾å½¢ç•Œé¢ä½¿ç”¨"><!---->å›¾å½¢ç•Œé¢ä½¿ç”¨<!----></a></li><li class="dropdown-subitem"><a href="/hpc/guide/login/file.html" class="nav-link" aria-label="æ–‡ä»¶ä¼ è¾“"><!---->æ–‡ä»¶ä¼ è¾“<!----></a></li><li class="dropdown-subitem"><a href="/hpc/guide/login/storage.html" class="nav-link" aria-label="å­˜å‚¨"><!---->å­˜å‚¨<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="hpcè½¯ä»¶"><span class="title"><!---->hpcè½¯ä»¶</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/soft/bestpractice.html" class="nav-link" aria-label="è½¯ä»¶åŠ è½½"><!---->è½¯ä»¶åŠ è½½<!----></a></li><li class="dropdown-item"><a href="/soft/module.html" class="nav-link" aria-label="module"><!---->module<!----></a></li><li class="dropdown-item"><a href="/soft/conda.html" class="nav-link" aria-label="conda"><!---->conda<!----></a></li><li class="dropdown-item"><a href="/soft/python.html" class="nav-link" aria-label="python"><!---->python<!----></a></li><li class="dropdown-item"><a href="/soft/r.html" class="nav-link" aria-label="r"><!---->r<!----></a></li><li class="dropdown-item"><a href="/soft/screen.html" class="nav-link" aria-label="screen"><!---->screen<!----></a></li><li class="dropdown-item"><a href="/soft/fqa.html" class="nav-link" aria-label="å¸¸è§é—®é¢˜"><!---->å¸¸è§é—®é¢˜<!----></a></li><li class="dropdown-item"><a href="/soft/single.html" class="nav-link" aria-label="centos7 å•ç”¨æˆ·æ¨¡å¼ä¿®æ”¹rootå¯†ç "><!---->centos7 å•ç”¨æˆ·æ¨¡å¼ä¿®æ”¹rootå¯†ç <!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="ä½œä¸šè„šæœ¬"><span class="title"><!---->ä½œä¸šè„šæœ¬</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/job/demo.html" class="nav-link" aria-label="Ræäº¤è„šæœ¬"><!---->Ræäº¤è„šæœ¬<!----></a></li><li class="dropdown-item"><a href="/job/matlab.html" class="nav-link" aria-label="matlab"><!---->matlab<!----></a></li><li class="dropdown-item"><a href="/job/jupyter.html" class="nav-link" aria-label="jupyter"><!---->jupyter<!----></a></li><li class="dropdown-item"><a href="/job/dependency.html" class="nav-link" aria-label="ä¾èµ–ä½œä¸š"><!---->ä¾èµ–ä½œä¸š<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="node"><span class="title"><!---->node</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/node/ev_api_server.html" class="nav-link" aria-label="å¤§äº‹ä»¶é¡¹ç›®"><!---->å¤§äº‹ä»¶é¡¹ç›®<!----></a></li><li class="dropdown-item"><a href="/node/swagger.html" class="nav-link" aria-label="express ä¸­ä½¿ç”¨ Swagger è‡ªåŠ¨ç”Ÿæˆæ¥å£æ–‡æ¡£"><!---->express ä¸­ä½¿ç”¨ Swagger è‡ªåŠ¨ç”Ÿæˆæ¥å£æ–‡æ¡£<!----></a></li><li class="dropdown-item"><a aria-current="page" href="/node/webpack.html" class="router-link-active router-link-exact-active nav-link active" aria-label="webpack"><!---->webpack<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="vue"><span class="title"><!---->vue</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/vue/vue2.html" class="nav-link" aria-label="vue2 é¡¹ç›®"><!---->vue2 é¡¹ç›®<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="poem"><span class="title"><!---->poem</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/poem/poem01.html" class="nav-link" aria-label="é’å±±ä¾æ—§"><!---->é’å±±ä¾æ—§<!----></a></li><li class="dropdown-item"><a href="/poem/poem02.html" class="nav-link" aria-label="å¤œç©ºä¸è¯­"><!---->å¤œç©ºä¸è¯­<!----></a></li><li class="dropdown-item"><a href="/poem/poem03.html" class="nav-link" aria-label="ä»“å¤®å˜‰æª"><!---->ä»“å¤®å˜‰æª<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="87memo" rel="noopener noreferrer" target="_blank" aria-label="memo" class="nav-link"><!---->memo<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="nav-item hide-in-mobile"><a href="pghpcdoc" rel="noopener noreferrer" target="_blank" aria-label="hpcdoc" class="nav-link"><!---->hpcdoc<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div></nav><!--[--><!----><!--]--></div><div class="navbar-end"><!--[--><!----><!--]--><!----><!----><div class="nav-item hide-in-mobile"><button type="button" class="outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><!--[--><button type="button" class="search-pro-button" role="search" aria-label="æœç´¢"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="placeholder">æœç´¢</div><div class="key-hints"><kbd class="key">Ctrl</kbd><kbd class="key">K</kbd></div></button><!--]--><!--[--><!----><!--]--><button type="button" class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-creative" style=""></span><span class="title">hpcé›†ç¾¤</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-creative" style=""></span><span class="title">hpc è½¯ä»¶</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><!----><span class="title">ä½œä¸šè„šæœ¬</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active" type="button"><span class="font-icon icon iconfont icon-creative" style=""></span><span class="title">node</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/node/ev_api_server.html" class="nav-link sidebar-link sidebar-page" aria-label="å¤§äº‹ä»¶é¡¹ç›®"><!---->å¤§äº‹ä»¶é¡¹ç›®<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/node/swagger.html" class="nav-link sidebar-link sidebar-page" aria-label="express ç”Ÿæˆæ¥å£æ–‡æ¡£"><!---->express ç”Ÿæˆæ¥å£æ–‡æ¡£<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/node/webpack.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="webpack"><!---->webpack<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_1ã€wepackä»‹ç»" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1ã€wepackä»‹ç»"><!---->1ã€wepackä»‹ç»<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_1-1-è§£å†³ä½œç”¨åŸŸé—®é¢˜" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.1 è§£å†³ä½œç”¨åŸŸé—®é¢˜"><!---->1.1 è§£å†³ä½œç”¨åŸŸé—®é¢˜<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_1-2-webpackä¸ç«å“çš„æ¯”è¾ƒ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.2 webpackä¸ç«å“çš„æ¯”è¾ƒ"><!---->1.2 webpackä¸ç«å“çš„æ¯”è¾ƒ<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_2-webpackåŸºæœ¬ä½¿ç”¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.  webpackåŸºæœ¬ä½¿ç”¨"><!---->2.  webpackåŸºæœ¬ä½¿ç”¨<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_2-1-webpack-config-js" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.1 webpack.config.js"><!---->2.1 webpack.config.js<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_2-2-plugin" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.2 plugin"><!---->2.2 plugin<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_2-3-webpack-dev-server" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.3 webpack-dev-server"><!---->2.3 webpack-dev-server<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_3-èµ„æºæ¨¡å—" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3. èµ„æºæ¨¡å—"><!---->3. èµ„æºæ¨¡å—<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_3-1-èµ„æºæ¨¡å—ç±»å‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.1 èµ„æºæ¨¡å—ç±»å‹"><!---->3.1 èµ„æºæ¨¡å—ç±»å‹<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_4-ç®¡ç†èµ„æº" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4. ç®¡ç†èµ„æº"><!---->4. ç®¡ç†èµ„æº<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_4-1-åŠ è½½css" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.1 åŠ è½½css"><!---->4.1 åŠ è½½css<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_4-2-æŠ½ç¦»css" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.2 æŠ½ç¦»css"><!---->4.2 æŠ½ç¦»css<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_4-3-å‹ç¼©css" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.3 å‹ç¼©css"><!---->4.3 å‹ç¼©css<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_4-4-åŠ è½½fonts" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.4 åŠ è½½fonts"><!---->4.4 åŠ è½½fonts<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_4-5-åŠ è½½csv-xml" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.5 åŠ è½½csv,xml"><!---->4.5 åŠ è½½csv,xml<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_4-6-åŠ è½½json-yml-toml" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.6 åŠ è½½json,yml,toml"><!---->4.6 åŠ è½½json,yml,toml<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_5-jsç¼–è¯‘" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5. jsç¼–è¯‘"><!---->5. jsç¼–è¯‘<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_5-1-babel-loader" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.1 babel-loader"><!---->5.1 babel-loader<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_5-2-regeneratorruntime" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.2 regeneratorRuntime"><!---->5.2 regeneratorRuntime<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_6-ä»£ç åˆ†ç¦»" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6. ä»£ç åˆ†ç¦»"><!---->6. ä»£ç åˆ†ç¦»<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_6-1-ä»£ç åˆ†ç¦»æ–¹æ³•" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.1 ä»£ç åˆ†ç¦»æ–¹æ³•"><!---->6.1 ä»£ç åˆ†ç¦»æ–¹æ³•<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_6-2-å…¥å£èµ·ç‚¹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.2 å…¥å£èµ·ç‚¹"><!---->6.2 å…¥å£èµ·ç‚¹<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_6-3-é˜²æ­¢é‡å¤" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.3 é˜²æ­¢é‡å¤"><!---->6.3 é˜²æ­¢é‡å¤<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_6-4-åŠ¨æ€å¯¼å…¥" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.4 åŠ¨æ€å¯¼å…¥"><!---->6.4 åŠ¨æ€å¯¼å…¥<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_6-5-æ‡’åŠ è½½" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.5 æ‡’åŠ è½½"><!---->6.5 æ‡’åŠ è½½<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_6-6-é¢„è·å–å’Œé¢„åŠ è½½" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.6 é¢„è·å–å’Œé¢„åŠ è½½"><!---->6.6 é¢„è·å–å’Œé¢„åŠ è½½<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_7-ç¼“å­˜" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7. ç¼“å­˜"><!---->7. ç¼“å­˜<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_7-1-è¾“å‡ºä¸šåŠ¡ä»£ç " class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7.1 è¾“å‡ºä¸šåŠ¡ä»£ç "><!---->7.1 è¾“å‡ºä¸šåŠ¡ä»£ç <!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_7-2-ç¼“å­˜ç¬¬ä¸‰æ–¹åº“" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7.2 ç¼“å­˜ç¬¬ä¸‰æ–¹åº“"><!---->7.2 ç¼“å­˜ç¬¬ä¸‰æ–¹åº“<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_7-3-æ–‡ä»¶æ”¾åœ¨æ–‡ä»¶å¤¹ä¸­" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7.3 æ–‡ä»¶æ”¾åœ¨æ–‡ä»¶å¤¹ä¸­"><!---->7.3 æ–‡ä»¶æ”¾åœ¨æ–‡ä»¶å¤¹ä¸­<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_8-æ‹†åˆ†å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒé…ç½®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8. æ‹†åˆ†å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒé…ç½®"><!---->8. æ‹†åˆ†å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒé…ç½®<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_8-1-å…¬å…±è·¯å¾„" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8.1 å…¬å…±è·¯å¾„"><!---->8.1 å…¬å…±è·¯å¾„<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_8-2-ç¯å¢ƒå˜é‡" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8.2 ç¯å¢ƒå˜é‡"><!---->8.2 ç¯å¢ƒå˜é‡<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_8-3-æ‹†åˆ†é…ç½®æ–‡ä»¶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8.3 æ‹†åˆ†é…ç½®æ–‡ä»¶"><!---->8.3 æ‹†åˆ†é…ç½®æ–‡ä»¶<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_8-4-npmè„šæœ¬" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8.4 npmè„šæœ¬"><!---->8.4 npmè„šæœ¬<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_8-5-æå–å…¬å…±é…ç½®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8.5 æå–å…¬å…±é…ç½®"><!---->8.5 æå–å…¬å…±é…ç½®<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_1-å¼€å‘æ•ˆç‡ä¸å¼€å‘è§„èŒƒ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1. å¼€å‘æ•ˆç‡ä¸å¼€å‘è§„èŒƒ"><!---->1. å¼€å‘æ•ˆç‡ä¸å¼€å‘è§„èŒƒ<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_1-1-source-map" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.1 source-map"><!---->1.1 source-map<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_1-2-devserver" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.2 devServer"><!---->1.2 devServer<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_1-3-æ¨¡å—çƒ­æ›¿æ¢ä¸çƒ­åŠ è½½" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.3 æ¨¡å—çƒ­æ›¿æ¢ä¸çƒ­åŠ è½½"><!---->1.3 æ¨¡å—çƒ­æ›¿æ¢ä¸çƒ­åŠ è½½<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_1-4-eslint" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.4 ESLint"><!---->1.4 ESLint<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_1-5-git-hooksä¸husky" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.5 git-hooksä¸husky"><!---->1.5 git-hooksä¸husky<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_2-æ¨¡å—ä¸ä¾èµ–" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2. æ¨¡å—ä¸ä¾èµ–"><!---->2. æ¨¡å—ä¸ä¾èµ–<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_2-1-æ¨¡å—è§£æ-resolve" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.1 æ¨¡å—è§£æ(resolve)"><!---->2.1 æ¨¡å—è§£æ(resolve)<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_2-2-å¤–éƒ¨æ‰©å±•" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.2 å¤–éƒ¨æ‰©å±•"><!---->2.2 å¤–éƒ¨æ‰©å±•<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_2-3-ä¾èµ–å›¾" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.3 ä¾èµ–å›¾"><!---->2.3 ä¾èµ–å›¾<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_3-æ‰©å±•åŠŸèƒ½" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3. æ‰©å±•åŠŸèƒ½"><!---->3. æ‰©å±•åŠŸèƒ½<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_3-1-postcssä¸cssæ¨¡å—" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.1 postCSSä¸CSSæ¨¡å—"><!---->3.1 postCSSä¸CSSæ¨¡å—<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_3-2-web-works" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.2 web works"><!---->3.2 web works<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_3-3-typescript" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.3 TypeScript"><!---->3.3 TypeScript<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_4-å¤šé¡µé¢åº”ç”¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4. å¤šé¡µé¢åº”ç”¨"><!---->4. å¤šé¡µé¢åº”ç”¨<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_4-1-entryé…ç½®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.1 entryé…ç½®"><!---->4.1 entryé…ç½®<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_4-2-è‡ªå®šä¹‰htmlæ¨¡ç‰ˆé…ç½®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.2 è‡ªå®šä¹‰htmlæ¨¡ç‰ˆé…ç½®"><!---->4.2 è‡ªå®šä¹‰htmlæ¨¡ç‰ˆé…ç½®<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_4-3-å¤šé¡µé¢ç¯å¢ƒæ­å»º" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.3 å¤šé¡µé¢ç¯å¢ƒæ­å»º"><!---->4.3 å¤šé¡µé¢ç¯å¢ƒæ­å»º<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_5-tree-shaking" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5. Tree Shaking"><!---->5. Tree Shaking<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_5-1-å®šä¹‰" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.1 å®šä¹‰"><!---->5.1 å®šä¹‰<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_5-2-sideeffects" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.2 sideEffects"><!---->5.2 sideEffects<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_6-æ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åºpwa" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6. æ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åºPWA"><!---->6. æ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åºPWA<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_6-1-éç¦»çº¿ç¯å¢ƒä¸‹è¿è¡Œ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.1 éç¦»çº¿ç¯å¢ƒä¸‹è¿è¡Œ"><!---->6.1 éç¦»çº¿ç¯å¢ƒä¸‹è¿è¡Œ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_6-2-workbox" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.2 workbox"><!---->6.2 workbox<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_6-3-æ³¨å†Œservice-worker" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.3 æ³¨å†Œservice worker"><!---->6.3 æ³¨å†Œservice worker<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_7-shimming-é¢„ç½®ä¾èµ–" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7. shimming é¢„ç½®ä¾èµ–"><!---->7. shimming é¢„ç½®ä¾èµ–<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_7-1-shimmingé¢„ç½®å…¨å±€å˜é‡" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7.1 shimmingé¢„ç½®å…¨å±€å˜é‡"><!---->7.1 shimmingé¢„ç½®å…¨å±€å˜é‡<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_7-2-ç»†ç²’åº¦-shimming" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7.2 ç»†ç²’åº¦ shimming"><!---->7.2 ç»†ç²’åº¦ shimming<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_7-3-å…¨å±€expots" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7.3 å…¨å±€expots"><!---->7.3 å…¨å±€expots<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_7-4-polyfills" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7.4 polyfills"><!---->7.4 polyfills<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_7-5-ä¼˜åŒ–polyfill" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7.5 ä¼˜åŒ–polyfill"><!---->7.5 ä¼˜åŒ–polyfill<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_8-library" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8. Library"><!---->8. Library<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_8-1-æ„å»ºlibrary" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8.1 æ„å»ºlibrary"><!---->8.1 æ„å»ºlibrary<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_8-2-æ„å»ºè½®å­" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8.2 æ„å»ºè½®å­"><!---->8.2 æ„å»ºè½®å­<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_8-3-å‘å¸ƒnpm-package" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8.3 å‘å¸ƒnpm-package"><!---->8.3 å‘å¸ƒnpm-package<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_9-module-federationæ¨¡å—è”é‚¦" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="9. module federationæ¨¡å—è”é‚¦"><!---->9. module federationæ¨¡å—è”é‚¦<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_10-æå‡æ„å»ºæ€§èƒ½" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="10. æå‡æ„å»ºæ€§èƒ½"><!---->10. æå‡æ„å»ºæ€§èƒ½<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/node/webpack.html#_10-1-é€šç”¨æ„å»ºä¼˜åŒ–" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="10.1 é€šç”¨æ„å»ºä¼˜åŒ–"><!---->10.1 é€šç”¨æ„å»ºä¼˜åŒ–<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-creative" style=""></span><span class="title">vue</span><span class="arrow end"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->ä¸€ã€Webpack-åŸºç¡€ç¯‡</h1><div class="page-info"><!----><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2024-02-06T10:12:58.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 44 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT44M"></span><!----><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_1ã€wepackä»‹ç»" class="router-link-active router-link-exact-active toc-link level2">1ã€wepackä»‹ç»</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_1-1-è§£å†³ä½œç”¨åŸŸé—®é¢˜" class="router-link-active router-link-exact-active toc-link level3">1.1 è§£å†³ä½œç”¨åŸŸé—®é¢˜</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_1-2-webpackä¸ç«å“çš„æ¯”è¾ƒ" class="router-link-active router-link-exact-active toc-link level3">1.2 webpackä¸ç«å“çš„æ¯”è¾ƒ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_2-webpackåŸºæœ¬ä½¿ç”¨" class="router-link-active router-link-exact-active toc-link level2">2.  webpackåŸºæœ¬ä½¿ç”¨</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_2-1-webpack-config-js" class="router-link-active router-link-exact-active toc-link level3">2.1 webpack.config.js</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_2-2-plugin" class="router-link-active router-link-exact-active toc-link level3">2.2 plugin</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_2-3-webpack-dev-server" class="router-link-active router-link-exact-active toc-link level3">2.3 webpack-dev-server</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_3-èµ„æºæ¨¡å—" class="router-link-active router-link-exact-active toc-link level2">3. èµ„æºæ¨¡å—</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_3-1-èµ„æºæ¨¡å—ç±»å‹" class="router-link-active router-link-exact-active toc-link level3">3.1 èµ„æºæ¨¡å—ç±»å‹</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_4-ç®¡ç†èµ„æº" class="router-link-active router-link-exact-active toc-link level2">4. ç®¡ç†èµ„æº</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_4-1-åŠ è½½css" class="router-link-active router-link-exact-active toc-link level3">4.1 åŠ è½½css</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_4-2-æŠ½ç¦»css" class="router-link-active router-link-exact-active toc-link level3">4.2 æŠ½ç¦»css</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_4-3-å‹ç¼©css" class="router-link-active router-link-exact-active toc-link level3">4.3 å‹ç¼©css</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_4-4-åŠ è½½fonts" class="router-link-active router-link-exact-active toc-link level3">4.4 åŠ è½½fonts</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_4-5-åŠ è½½csv-xml" class="router-link-active router-link-exact-active toc-link level3">4.5 åŠ è½½csv,xml</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_4-6-åŠ è½½json-yml-toml" class="router-link-active router-link-exact-active toc-link level3">4.6 åŠ è½½json,yml,toml</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_5-jsç¼–è¯‘" class="router-link-active router-link-exact-active toc-link level2">5. jsç¼–è¯‘</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_5-1-babel-loader" class="router-link-active router-link-exact-active toc-link level3">5.1 babel-loader</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_5-2-regeneratorruntime" class="router-link-active router-link-exact-active toc-link level3">5.2 regeneratorRuntime</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_6-ä»£ç åˆ†ç¦»" class="router-link-active router-link-exact-active toc-link level2">6. ä»£ç åˆ†ç¦»</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_6-1-ä»£ç åˆ†ç¦»æ–¹æ³•" class="router-link-active router-link-exact-active toc-link level3">6.1 ä»£ç åˆ†ç¦»æ–¹æ³•</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_6-2-å…¥å£èµ·ç‚¹" class="router-link-active router-link-exact-active toc-link level3">6.2 å…¥å£èµ·ç‚¹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_6-3-é˜²æ­¢é‡å¤" class="router-link-active router-link-exact-active toc-link level3">6.3 é˜²æ­¢é‡å¤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_6-4-åŠ¨æ€å¯¼å…¥" class="router-link-active router-link-exact-active toc-link level3">6.4 åŠ¨æ€å¯¼å…¥</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_6-5-æ‡’åŠ è½½" class="router-link-active router-link-exact-active toc-link level3">6.5 æ‡’åŠ è½½</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_6-6-é¢„è·å–å’Œé¢„åŠ è½½" class="router-link-active router-link-exact-active toc-link level3">6.6 é¢„è·å–å’Œé¢„åŠ è½½</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_7-ç¼“å­˜" class="router-link-active router-link-exact-active toc-link level2">7. ç¼“å­˜</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_7-1-è¾“å‡ºä¸šåŠ¡ä»£ç " class="router-link-active router-link-exact-active toc-link level3">7.1 è¾“å‡ºä¸šåŠ¡ä»£ç </a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_7-2-ç¼“å­˜ç¬¬ä¸‰æ–¹åº“" class="router-link-active router-link-exact-active toc-link level3">7.2 ç¼“å­˜ç¬¬ä¸‰æ–¹åº“</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_7-3-æ–‡ä»¶æ”¾åœ¨æ–‡ä»¶å¤¹ä¸­" class="router-link-active router-link-exact-active toc-link level3">7.3 æ–‡ä»¶æ”¾åœ¨æ–‡ä»¶å¤¹ä¸­</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_8-æ‹†åˆ†å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒé…ç½®" class="router-link-active router-link-exact-active toc-link level2">8. æ‹†åˆ†å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒé…ç½®</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_8-1-å…¬å…±è·¯å¾„" class="router-link-active router-link-exact-active toc-link level3">8.1 å…¬å…±è·¯å¾„</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_8-2-ç¯å¢ƒå˜é‡" class="router-link-active router-link-exact-active toc-link level3">8.2 ç¯å¢ƒå˜é‡</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_8-3-æ‹†åˆ†é…ç½®æ–‡ä»¶" class="router-link-active router-link-exact-active toc-link level3">8.3 æ‹†åˆ†é…ç½®æ–‡ä»¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_8-4-npmè„šæœ¬" class="router-link-active router-link-exact-active toc-link level3">8.4 npmè„šæœ¬</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_8-5-æå–å…¬å…±é…ç½®" class="router-link-active router-link-exact-active toc-link level3">8.5 æå–å…¬å…±é…ç½®</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_1-å¼€å‘æ•ˆç‡ä¸å¼€å‘è§„èŒƒ" class="router-link-active router-link-exact-active toc-link level2">1. å¼€å‘æ•ˆç‡ä¸å¼€å‘è§„èŒƒ</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_1-1-source-map" class="router-link-active router-link-exact-active toc-link level3">1.1 source-map</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_1-2-devserver" class="router-link-active router-link-exact-active toc-link level3">1.2 devServer</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_1-3-æ¨¡å—çƒ­æ›¿æ¢ä¸çƒ­åŠ è½½" class="router-link-active router-link-exact-active toc-link level3">1.3 æ¨¡å—çƒ­æ›¿æ¢ä¸çƒ­åŠ è½½</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_1-4-eslint" class="router-link-active router-link-exact-active toc-link level3">1.4 ESLint</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_1-5-git-hooksä¸husky" class="router-link-active router-link-exact-active toc-link level3">1.5 git-hooksä¸husky</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_2-æ¨¡å—ä¸ä¾èµ–" class="router-link-active router-link-exact-active toc-link level2">2. æ¨¡å—ä¸ä¾èµ–</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_2-1-æ¨¡å—è§£æ-resolve" class="router-link-active router-link-exact-active toc-link level3">2.1 æ¨¡å—è§£æ(resolve)</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_2-2-å¤–éƒ¨æ‰©å±•" class="router-link-active router-link-exact-active toc-link level3">2.2 å¤–éƒ¨æ‰©å±•</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_2-3-ä¾èµ–å›¾" class="router-link-active router-link-exact-active toc-link level3">2.3 ä¾èµ–å›¾</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_3-æ‰©å±•åŠŸèƒ½" class="router-link-active router-link-exact-active toc-link level2">3. æ‰©å±•åŠŸèƒ½</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_3-1-postcssä¸cssæ¨¡å—" class="router-link-active router-link-exact-active toc-link level3">3.1 postCSSä¸CSSæ¨¡å—</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_3-2-web-works" class="router-link-active router-link-exact-active toc-link level3">3.2 web works</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_3-3-typescript" class="router-link-active router-link-exact-active toc-link level3">3.3 TypeScript</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_4-å¤šé¡µé¢åº”ç”¨" class="router-link-active router-link-exact-active toc-link level2">4. å¤šé¡µé¢åº”ç”¨</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_4-1-entryé…ç½®" class="router-link-active router-link-exact-active toc-link level3">4.1 entryé…ç½®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_4-2-è‡ªå®šä¹‰htmlæ¨¡ç‰ˆé…ç½®" class="router-link-active router-link-exact-active toc-link level3">4.2 è‡ªå®šä¹‰htmlæ¨¡ç‰ˆé…ç½®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_4-3-å¤šé¡µé¢ç¯å¢ƒæ­å»º" class="router-link-active router-link-exact-active toc-link level3">4.3 å¤šé¡µé¢ç¯å¢ƒæ­å»º</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_5-tree-shaking" class="router-link-active router-link-exact-active toc-link level2">5. Tree Shaking</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_5-1-å®šä¹‰" class="router-link-active router-link-exact-active toc-link level3">5.1 å®šä¹‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_5-2-sideeffects" class="router-link-active router-link-exact-active toc-link level3">5.2 sideEffects</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_6-æ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åºpwa" class="router-link-active router-link-exact-active toc-link level2">6. æ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åºPWA</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_6-1-éç¦»çº¿ç¯å¢ƒä¸‹è¿è¡Œ" class="router-link-active router-link-exact-active toc-link level3">6.1 éç¦»çº¿ç¯å¢ƒä¸‹è¿è¡Œ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_6-2-workbox" class="router-link-active router-link-exact-active toc-link level3">6.2 workbox</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_6-3-æ³¨å†Œservice-worker" class="router-link-active router-link-exact-active toc-link level3">6.3 æ³¨å†Œservice worker</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_7-shimming-é¢„ç½®ä¾èµ–" class="router-link-active router-link-exact-active toc-link level2">7. shimming é¢„ç½®ä¾èµ–</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_7-1-shimmingé¢„ç½®å…¨å±€å˜é‡" class="router-link-active router-link-exact-active toc-link level3">7.1 shimmingé¢„ç½®å…¨å±€å˜é‡</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_7-2-ç»†ç²’åº¦-shimming" class="router-link-active router-link-exact-active toc-link level3">7.2 ç»†ç²’åº¦ shimming</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_7-3-å…¨å±€expots" class="router-link-active router-link-exact-active toc-link level3">7.3 å…¨å±€expots</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_7-4-polyfills" class="router-link-active router-link-exact-active toc-link level3">7.4 polyfills</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_7-5-ä¼˜åŒ–polyfill" class="router-link-active router-link-exact-active toc-link level3">7.5 ä¼˜åŒ–polyfill</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_8-library" class="router-link-active router-link-exact-active toc-link level2">8. Library</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_8-1-æ„å»ºlibrary" class="router-link-active router-link-exact-active toc-link level3">8.1 æ„å»ºlibrary</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_8-2-æ„å»ºè½®å­" class="router-link-active router-link-exact-active toc-link level3">8.2 æ„å»ºè½®å­</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_8-3-å‘å¸ƒnpm-package" class="router-link-active router-link-exact-active toc-link level3">8.3 å‘å¸ƒnpm-package</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_9-module-federationæ¨¡å—è”é‚¦" class="router-link-active router-link-exact-active toc-link level2">9. module federationæ¨¡å—è”é‚¦</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_10-æå‡æ„å»ºæ€§èƒ½" class="router-link-active router-link-exact-active toc-link level2">10. æå‡æ„å»ºæ€§èƒ½</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/node/webpack.html#_10-1-é€šç”¨æ„å»ºä¼˜åŒ–" class="router-link-active router-link-exact-active toc-link level3">10.1 é€šç”¨æ„å»ºä¼˜åŒ–</a></li><!----><!--]--></ul></li><!--]--></ul></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h1 id="ä¸€ã€webpack-åŸºç¡€ç¯‡" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€webpack-åŸºç¡€ç¯‡" aria-hidden="true">#</a> ä¸€ã€Webpack-åŸºç¡€ç¯‡</h1><h2 id="_1ã€wepackä»‹ç»" tabindex="-1"><a class="header-anchor" href="#_1ã€wepackä»‹ç»" aria-hidden="true">#</a> 1ã€wepackä»‹ç»</h2><h3 id="_1-1-è§£å†³ä½œç”¨åŸŸé—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_1-1-è§£å†³ä½œç”¨åŸŸé—®é¢˜" aria-hidden="true">#</a> 1.1 è§£å†³ä½œç”¨åŸŸé—®é¢˜</h3><p>åœºæ™¯ï¼š</p><p>ç”¨scriptæ ‡ç­¾å¼•å…¥jsæ–‡ä»¶ï¼Œå°†æ‰€æœ‰çš„ä»£ç éƒ½ç›´æ¥æ‰“åŒ…åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œä¼šä½¿å¾—æ‰€æœ‰å˜é‡æˆä¸ºå…¨å±€å˜é‡ï¼Œæ±¡æŸ“å…¨å±€ä½œç”¨åŸŸã€‚æ‰€ä»¥éœ€è¦ä»£ç æ‹†åˆ†ï¼Œä½¿å¾—ä»£ç æ¨¡å—åŒ–ã€‚</p><h4 id="gulp" tabindex="-1"><a class="header-anchor" href="#gulp" aria-hidden="true">#</a> <strong>gulp</strong></h4><p>åº•å±‚ä½¿ç”¨<strong>IFFE</strong>ï¼Œreturnéœ€è¦æš´éœ²çš„å˜é‡å®ç°ã€‚å­˜åœ¨å¤§é‡æ— ç”¨çš„ä»£ç ï¼Œæ–‡ä»¶ä½“ç§¯å¤ªå¤§ï¼Œä¼šå½±å“æ„å»ºå’ŒåŠ è½½æ•ˆç‡çš„é—®é¢˜ã€‚æ‰€ä»¥æå‡ºäº†ä»£ç æ‹†åˆ†çš„æƒ³æ³•</p><h4 id="commonjs" tabindex="-1"><a class="header-anchor" href="#commonjs" aria-hidden="true">#</a> <strong>commonJS</strong></h4><p>è¿™æ˜¯ä¸€ç§åœ¨<strong>nodeJSç¯å¢ƒ</strong>ä¸‹ï¼ˆæµè§ˆå™¨ç¯å¢ƒä¸‹æ— æ³•ç›´æ¥ä½¿ç”¨ï¼‰çš„è§£å†³æ–¹æ³•ï¼Œé€šè¿‡<strong>module.exportså’Œrequire</strong>å®ç°æ¨¡å—åŒ–ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// math.js</span>
<span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">minus</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x <span class="token operator">-</span> y<span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  add<span class="token punctuation">,</span>
  minus<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// server.js</span>
<span class="token keyword">const</span> math <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./math&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>math<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="requirejs" tabindex="-1"><a class="header-anchor" href="#requirejs" aria-hidden="true">#</a> <strong>requireJS</strong></h4><p>åœ¨æµè§ˆå™¨ä¸‹ä½¿ç”¨çš„ï¼Œå¯ä»¥ä½¿ç±»ä¼¼commonJsçš„æ¨¡å—åœ¨æµè§ˆå™¨è¿è¡Œã€‚é€šè¿‡<strong>defineå’Œrequire</strong>å®ç°</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//add.js</span>
<span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token comment">// define([]ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¾èµ–çš„å…¶ä»–æ¨¡å—ï¼Œfuncï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å›è°ƒå‡½æ•°ï¼Œæ˜¯æ¨¡å—å¯¹å¤–æš´éœ²çš„æ¥å£)</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> add<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// main.js</span>
<span class="token comment">// ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¾èµ–æ¨¡å—çš„æ•°ç»„ï¼Œå®ƒè®¿é—®å‚ç…§çš„ç›®å½•ç‚¹åœ¨å¼•ç”¨çš„htmlæ–‡ä»¶ï¼Œæ³¨æ„ç›¸å¯¹è·¯å¾„çš„ä¹¦å†™</span>
<span class="token comment">// ç¬¬äºŒä¸ªå‚æ•°æ˜¯å›è°ƒå‡½æ•°ï¼ŒæŒ‡å‘äº†defineçš„ç¬¬äºŒä¸ªå‡½æ•°</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;./add&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;./minus&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">add<span class="token punctuation">,</span> minus</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// index.html</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> data<span class="token operator">-</span>mainï¼šåŠ è½½çš„å…¥å£jsæ–‡ä»¶ <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script
      src<span class="token operator">=</span><span class="token string">&quot;https://cdn.bootcdn.net/ajax/libs/require.js/2.3.6/require.js&quot;</span>
      data<span class="token operator">-</span>main<span class="token operator">=</span><span class="token string">&quot;./main.js&quot;</span>
<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ecmascript" tabindex="-1"><a class="header-anchor" href="#ecmascript" aria-hidden="true">#</a> ECMAScript</h4><p>å¯¹äºwebé¡¹ç›®ï¼Œæ¨¡å—é€æ¸æˆä¸ºECMAScriptçš„æ ‡å‡†ï¼Œä½¿ç”¨<strong>exportå’Œimpor</strong>tå®ç°ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// add.js</span>
<span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> add<span class="token punctuation">;</span>ã€
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token comment">&lt;!-- å¦‚æœä¸åŠ typeï¼Œä¼šæŠ¥é”™Uncaught SyntaxError: Cannot use import statement outside a moduleï¼Œ
    åŠ ä¸Štype=&quot;module&quot;ä¹‹åï¼Œä¼šæŠ¥é”™è·¨åŸŸéœ€è¦æ­å»ºä¸€ä¸ªæœ¬åœ°çš„http serverç¯å¢ƒï¼Œä½¿ç”¨npxæ‹‰å–ä¸€ä¸ªçº¿ä¸Šçš„http server
    Access to script at &#39;file:///D:/vscode/WebpackDemo/ECMAScript/add.js&#39; from origin &#39;null&#39; has been blocked by CORS policy
    npxå¯ä»¥å®ç°å½“æŸä¸€ä¸ªæ¨¡å—æœ¬åœ°ä¸å­˜åœ¨æ—¶ï¼Œå¯ä»¥ä»ç½‘ä¸Šå®‰è£…ä¸€ä¸ªæ¨¡å—--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
      <span class="token keyword">import</span> add <span class="token keyword">from</span> <span class="token string">&quot;./add.js&quot;</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="webpack" tabindex="-1"><a class="header-anchor" href="#webpack" aria-hidden="true">#</a> webpack</h4><p>å¯ä»¥å®ç°æ‰“åŒ…JSåº”ç”¨ç¨‹åºï¼Œä¹Ÿå¯ä»¥æ‰©å±•æ”¯æŒå¾ˆå¤šçš„é™æ€èµ„æºæ‰“åŒ…ï¼Œå¹¶åŒæ—¶æ”¯æŒESçš„æ¨¡å—åŒ–å’ŒcommonJS</p><h3 id="_1-2-webpackä¸ç«å“çš„æ¯”è¾ƒ" tabindex="-1"><a class="header-anchor" href="#_1-2-webpackä¸ç«å“çš„æ¯”è¾ƒ" aria-hidden="true">#</a> 1.2 webpackä¸ç«å“çš„æ¯”è¾ƒ</h3><h4 id="parcel" tabindex="-1"><a class="header-anchor" href="#parcel" aria-hidden="true">#</a> parcel</h4><p>é…ç½®ç®€å•ï¼Œä¸€èˆ¬æ— éœ€åšå…¶ä»–çš„é…ç½®å¼€ç®±å³ç”¨ã€‚é€‚åˆæ„å»ºä¸€ä¸ªç®€å•ï¼Œå¯ä»¥å¿«é€Ÿè¿è¡Œçš„åº”ç”¨ã€‚</p><h4 id="rollup-js" tabindex="-1"><a class="header-anchor" href="#rollup-js" aria-hidden="true">#</a> rollup.js</h4><p>ç”¨æ ‡å‡†åŒ–çš„æ ¼å¼ç¼–å†™ä»£ç ï¼Œå¦‚ES6ï¼Œé€šè¿‡å‡å°‘æ— ç”¨çš„ä»£ç ï¼Œå°½å¯èƒ½çš„ç¼©å°åŒ…çš„ä½“ç§¯ã€‚ä¸€èˆ¬åªèƒ½ç”¨æ¥æ‰“åŒ…jsã€‚é€‚åˆæ„å»ºä¸€ä¸ªç®€å•çš„ç±»åº“ï¼Œåªéœ€è¦å¯¼å…¥å¾ˆå°‘çš„ç¬¬ä¸‰æ–¹çš„åº“ã€‚</p><h4 id="vite" tabindex="-1"><a class="header-anchor" href="#vite" aria-hidden="true">#</a> Vite</h4><p>æ˜¯æœªæ¥vueçš„æ­å»ºå·¥å…·ï¼Œå¯ä»¥å®Œæˆå¼€å‘ï¼Œç¼–è¯‘ï¼Œå‘å¸ƒï¼Œdemoã€‚Viteé‡‡ç”¨<strong>åŸºäºESModule</strong>çš„æ„å»ºæ–¹å¼ï¼Œå¯ä»¥<strong>æŒ‰éœ€ç¼–è¯‘ï¼Œæ”¯æŒæ¨¡å—çƒ­æ›´æ–°</strong>ç­‰ã€‚</p><h4 id="webpack-1" tabindex="-1"><a class="header-anchor" href="#webpack-1" aria-hidden="true">#</a> webpack</h4><p>é€‚åˆå¤æ‚çš„ï¼Œéœ€è¦ç»§æ‰¿å¾ˆå¤šç¬¬ä¸‰æ–¹åº“ï¼Œéœ€è¦æ‹†åˆ†ä»£ç ï¼Œéœ€è¦ä½¿ç”¨é™æ€èµ„æºæ–‡ä»¶ï¼Œæ”¯æŒcommon.jsï¼ŒesModuleçš„åº”ç”¨ã€‚</p><p>webpacké™¤äº†å¯ä»¥å¼•å…¥jsï¼Œè¿˜å¯ä»¥ä½¿ç”¨å†…ç½®çš„èµ„æºæ¨¡å—asset modulesæ¥å¼•å…¥ä»»ä½•çš„å…¶ä»–ç±»å‹èµ„æºã€‚</p><h2 id="_2-webpackåŸºæœ¬ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#_2-webpackåŸºæœ¬ä½¿ç”¨" aria-hidden="true">#</a> 2. webpackåŸºæœ¬ä½¿ç”¨</h2><h3 id="_2-1-webpack-config-js" tabindex="-1"><a class="header-anchor" href="#_2-1-webpack-config-js" aria-hidden="true">#</a> 2.1 webpack.config.js</h3><p>æ­å»ºåŸºæœ¬çš„ç¯å¢ƒ</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>npm install @babel<span class="token operator">/</span>core @babel<span class="token operator">/</span>preset<span class="token operator">-</span>env babel<span class="token operator">-</span>loader clean<span class="token operator">-</span>webpack<span class="token operator">-</span>plugin core<span class="token operator">-</span>js html<span class="token operator">-</span>webpack<span class="token operator">-</span>plugin ts<span class="token operator">-</span>loader typescript webpack webpack<span class="token operator">-</span>cli webpack<span class="token operator">-</span>dev<span class="token operator">-</span>server less less<span class="token operator">-</span>loader css<span class="token operator">-</span>loader style<span class="token operator">-</span>loader postcss postcss<span class="token operator">-</span>loader postcss<span class="token operator">-</span>preset<span class="token operator">-</span>env <span class="token operator">-</span>D
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>webpack.config.jsé…ç½®æ–‡ä»¶ï¼Œåå­—å›ºå®šï¼Œç”±webpackè‡ªåŠ¨è¯»å–</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;html-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> CssMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;css-minimizer-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> TerserPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;terser-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> toml <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;toml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> yaml <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;yaml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> json <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">env</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>env<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">index</span><span class="token operator">:</span> <span class="token string">&quot;./src/index.js&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">another</span><span class="token operator">:</span> <span class="token string">&quot;./src/another-module.js&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// filename: &quot;bundle.js&quot;,</span>
      <span class="token comment">// [name]æ˜¯å…¥å£chunkçš„keyçš„åå­—</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;scripts/[name].[contenthash].js&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;./dist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token comment">// æ¸…ç†å½“å‰æ‰“åŒ…ä¹‹å¤–çš„æ–‡ä»¶</span>
      <span class="token literal-property property">clean</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token comment">// webpacké»˜è®¤ç”Ÿæˆæ–‡ä»¶åï¼š[contenthash]ï¼Œæ ¹æ®æ–‡ä»¶çš„å†…å®¹ç”Ÿæˆä¸€ä¸ªå“ˆå¸Œçš„å­—ç¬¦ä¸²</span>
      <span class="token comment">// [ext]è¡¨ç¤ºæºæ–‡ä»¶çš„æ‰©å±•å</span>
      <span class="token literal-property property">assetModuleFilename</span><span class="token operator">:</span> <span class="token string">&quot;images/[contenthash][ext]&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:8080/&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token literal-property property">mode</span><span class="token operator">:</span> env<span class="token punctuation">.</span>production <span class="token operator">?</span> <span class="token string">&quot;production&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;development&quot;</span><span class="token punctuation">,</span>

    <span class="token comment">// å°†ä»£ç ç›´æ¥æ˜ å°„åˆ°æ‰“åŒ…å¥½çš„jsæ–‡ä»¶ä¸­</span>
    <span class="token literal-property property">devtool</span><span class="token operator">:</span> <span class="token string">&quot;inline-source-map&quot;</span><span class="token punctuation">,</span>

    <span class="token comment">// HtmlWebpackPlugin: index.htmlçš„è‡ªåŠ¨ç”Ÿæˆï¼Œæœ‰å¯¹åº”çš„srciptæ ‡ç­¾å¼•å…¥æ–‡ä»¶</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token comment">// åŸºäºtemplateå¯¹åº”çš„æ–‡ä»¶æ‰“åŒ…ç”Ÿæˆhtml</span>
        <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">&quot;./index.html&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;app.html&quot;</span><span class="token punctuation">,</span>
        <span class="token comment">// scriptæ ‡ç­¾çš„ç”Ÿæˆä½ç½®</span>
        <span class="token literal-property property">inject</span><span class="token operator">:</span> <span class="token string">&quot;body&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;styles/[contenthash].css&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>

    <span class="token comment">// webpack-dev-serverå®é™…æ²¡æœ‰è¾“å‡ºä»»ä½•çš„æ–‡ä»¶ï¼Œå®ƒå°†æ‰“åŒ…å¥½çš„bundle.jsæ”¾åœ¨äº†å†…å­˜é‡Œ</span>
    <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// æŒ‡å®šserverçš„æ ¹ç›®å½•</span>
      <span class="token keyword">static</span><span class="token operator">:</span> <span class="token string">&quot;./dist&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.png$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;asset/resource&quot;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">generator</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;images/[contenthash][ext]&quot;</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.svg$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;asset/inline&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.txt$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;asset/source&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.jpg$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;asset&quot;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// è‡ªå®šä¹‰æ˜¯å¦åœ¨distä¸‹åˆ›å»ºæ–°æ–‡ä»¶çš„ä¸´ç•Œå€¼</span>
            <span class="token literal-property property">dataUrlCondition</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token literal-property property">maxSize</span><span class="token operator">:</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">,</span> <span class="token comment">// å³4mb</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(css|less)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          <span class="token comment">// css-loaderç”¨äºæ‰“åŒ…ï¼Œæ­£ç¡®è¯†åˆ«cssæ–‡ä»¶</span>
          <span class="token comment">// style-loaderå»çœŸæ­£å¼•å…¥cssæ–‡ä»¶</span>
          <span class="token comment">// é¡ºåºæ˜¯ä¸å¯ä»¥é¢ å€’çš„ï¼Œä¼šä»å³å‘å·¦ä½¿ç”¨</span>
          <span class="token comment">// use: [&quot;style-loader&quot;, &quot;css-loader&quot;, &quot;less-loader&quot;],</span>
          <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;less-loader&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(woff|woff2|eot|ttf|otf)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;asset/resource&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(csv|tsv)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">&quot;csv-loader&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.xml$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">&quot;xml-loader&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.toml$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;json&quot;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">parse</span><span class="token operator">:</span> toml<span class="token punctuation">.</span>parse<span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.yaml$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;json&quot;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">parse</span><span class="token operator">:</span> yaml<span class="token punctuation">.</span>parse<span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.json$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;json&quot;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">parse</span><span class="token operator">:</span> json<span class="token punctuation">.</span>parse<span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&quot;babel-loader&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
              <span class="token comment">// plugins: [[&quot;@babel/plugin-transform-runtime&quot;]],</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// ä¼˜åŒ–ç›¸å…³çš„é…ç½®</span>
    <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">minimizer</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

      <span class="token comment">// æŠ½ç¦»å…¬å…±ä»£ç çš„æ’ä»¶</span>
      <span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// chunks: &quot;all&quot;,</span>
        <span class="token comment">// ç¼“å­˜ç»„ï¼Œç¼“å­˜ç¬¬ä¸‰æ–¹æ–‡ä»¶</span>
        <span class="token literal-property property">cacheGroups</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token comment">// vendor:æå–å…¬å…±æ–¹æ³•</span>
          <span class="token literal-property property">vendor</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\\/]node_modules[\\/]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;vendors&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">&quot;all&quot;</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>mode <ul><li><strong>development</strong> å¼€å‘æ¨¡å¼ï¼šä¼šå°† p<wbr>rocess.env.NODE_ENV çš„å€¼è®¾ä¸º developmentã€‚å¯ç”¨ NameChunksPlugin å’Œ NameModulesPluginã€‚ç‰¹ç‚¹æ˜¯èƒ½è®©ä»£ç æœ¬åœ°è°ƒè¯•è¿è¡Œçš„ç¯å¢ƒã€‚</li><li><strong>production</strong> ç”Ÿäº§æ¨¡å¼ï¼šä¼šå°† p<wbr>rocess.env.NODE_ENV çš„å€¼è®¾ä¸º productionã€‚å¯ç”¨ FlagDependencyUsagePlugin, FlagIncludedChunksPlugin, ModuleConcatenationPlugin, NoEmitOnErrorsPlugin, OccurrenceOrderPlugin, SideEffectsFlagPlugin å’Œ UglifyJsPluginã€‚ç‰¹ç‚¹æ˜¯èƒ½è®©ä»£ç ä¼˜åŒ–ä¸Šçº¿è¿è¡Œçš„ç¯å¢ƒã€‚</li><li><strong>none</strong>ï¼š</li></ul></li></ul><h3 id="_2-2-plugin" tabindex="-1"><a class="header-anchor" href="#_2-2-plugin" aria-hidden="true">#</a> 2.2 plugin</h3><p><a href="https://webpack.js.org/plugins/" target="_blank" rel="noopener noreferrer">https://webpack.js.org/plugins/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> webpackå®˜ç½‘æ’ä»¶</p><p>webpackä¼šè®°è½½æ–‡ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå°†å…¶äº¤ç»™webpackç¼–è¯‘å™¨ï¼ŒåŠ å·¥ç”Ÿæˆç›®æ ‡æ–‡ä»¶ã€‚åœ¨ç¼–è¯‘çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦pluginsæ¥è¾…åŠ©å®Œæˆå¦‚æ‰“åŒ…ä¼˜åŒ–ï¼Œèµ„æºç®¡ç†ç­‰åŠŸèƒ½ã€‚</p><h3 id="_2-3-webpack-dev-server" tabindex="-1"><a class="header-anchor" href="#_2-3-webpack-dev-server" aria-hidden="true">#</a> 2.3 webpack-dev-server</h3><p>æ‰“åŒ…å®æ—¶æ›´æ–°ï¼Œä¸éœ€è¦æ‰‹åŠ¨é‡æ–°æ‰§è¡Œæ‰“åŒ…çš„å‘½ä»¤ã€‚å½“æºä»£ç æ”¹å˜æ—¶ï¼Œä¼šè‡ªåŠ¨é‡æ–°è¿è¡Œï¼Œæ‰“åŒ…æ–°çš„æ–‡ä»¶ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npx webpack --watch
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>webpack-dev-serveræä¾›äº†ä¸€ä¸ªåŸºæœ¬çš„web serverï¼Œå¹¶ä¸”å…·æœ‰live reloadingï¼ˆå®æ—¶åŠ è½½ï¼‰çš„åŠŸèƒ½ã€‚ä¸ä½†èƒ½ç›‘æµ‹æ–‡ä»¶çš„å˜åŒ–é‡æ–°ç¼–è¯‘ï¼Œè¿˜èƒ½å®ç°æµè§ˆå™¨çš„è‡ªåŠ¨åˆ·æ–°</p><p>å®‰è£…</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm install webpack-dev-server -D
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_3-èµ„æºæ¨¡å—" tabindex="-1"><a class="header-anchor" href="#_3-èµ„æºæ¨¡å—" aria-hidden="true">#</a> 3. èµ„æºæ¨¡å—</h2><h3 id="_3-1-èµ„æºæ¨¡å—ç±»å‹" tabindex="-1"><a class="header-anchor" href="#_3-1-èµ„æºæ¨¡å—ç±»å‹" aria-hidden="true">#</a> 3.1 èµ„æºæ¨¡å—ç±»å‹</h3><p>é€šè¿‡å››ç§ç±»å‹æ¨¡å—æ¥æ›¿æ¢æ‰€æœ‰çš„loaderï¼ŒåŒ…æ‹¬</p><ul><li><strong>asset/resourceï¼šä¼šå‘é€å•ç‹¬çš„æ–‡ä»¶å¹¶å¯¼å‡ºURLï¼Œåœ¨distæ–‡ä»¶ä¼šæœ‰å¯¹åº”çš„èµ„æºã€‚</strong></li><li><strong>asset/inlineï¼šä¼šå¯¼å‡ºèµ„æºçš„Data URLï¼Œåœ¨distæ–‡ä»¶ä¸ä¼šæœ‰å¯¹åº”çš„èµ„æº</strong>ã€‚URLä¸æ˜¯ä¸€ä¸ªå›¾ç‰‡çš„URLï¼Œè€Œæ˜¯ä¸€ä¸ªData URL base64çš„æ ¼å¼ã€‚</li><li><strong>asset/sourceï¼šä¼šå¯¼å‡ºèµ„æºçš„æºä»£ç </strong></li><li><strong>assetï¼šé€šç”¨èµ„æºç±»å‹ï¼Œä¼šåœ¨å¯¼å‡ºä¸€ä¸ªData URLå’Œå‘é€ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¹‹é—´è‡ªåŠ¨è¿›è¡Œé€‰æ‹©</strong>ï¼Œå³åœ¨asset/inlineå’Œasset/resourceä¹‹é—´é€‰æ‹©ã€‚é»˜è®¤webpackä¼šåˆ¤æ–­åŠ è½½èµ„æºçš„å¤§å°ï¼Œå½“èµ„æºæ–‡ä»¶å¤§äº8kæ—¶ï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ªèµ„æºï¼Œå³ä½¿ç”¨asset/resourceã€‚è¿™ä¸ªä¸´ç•Œå€¼ä¹Ÿæ˜¯å¯ä»¥è‡ªå®šä¹‰çš„ï¼Œé€šè¿‡parser.dataUrlCondition.maxSizeã€‚</li></ul><p><strong>æŒ‡å®šæ‰“åŒ…èµ„æºçš„æ–‡ä»¶åå’Œè·¯å¾„æœ‰ä¸¤ç§æ–¹å¼ï¼Œåœ¨outputä¸­æ·»åŠ assetModuleFilenameå±æ€§æˆ–åœ¨rulesé‡Œæ·»åŠ generatorå±æ€§ï¼Œå…¶ä¸­generatorçš„ä¼˜å…ˆçº§è¦æ›´é«˜ã€‚</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// æ–¹æ³•ä¸€ï¼š</span>
<span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// webpacké»˜è®¤ç”Ÿæˆæ–‡ä»¶åï¼š[contenthash]ï¼Œæ ¹æ®æ–‡ä»¶çš„å†…å®¹ç”Ÿæˆä¸€ä¸ªå“ˆå¸Œçš„å­—ç¬¦ä¸²</span>
    <span class="token comment">// [ext]è¡¨ç¤ºæºæ–‡ä»¶çš„æ‰©å±•å</span>
    <span class="token literal-property property">assetModuleFilename</span><span class="token operator">:</span> <span class="token string">&quot;images/[contenthash][ext]&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token comment">// æ–¹æ³•äºŒï¼š</span>
<span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.png$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;asset/resource&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">generator</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;images/test.png&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-ç®¡ç†èµ„æº" tabindex="-1"><a class="header-anchor" href="#_4-ç®¡ç†èµ„æº" aria-hidden="true">#</a> 4. ç®¡ç†èµ„æº</h2><h3 id="_4-1-åŠ è½½css" tabindex="-1"><a class="header-anchor" href="#_4-1-åŠ è½½css" aria-hidden="true">#</a> 4.1 åŠ è½½css</h3><p>webpackå¯ä»¥è§£æjs,jsonç±»çš„æ–‡ä»¶ï¼Œloaderå¯ä»¥è®©webpackå»è§£æå…¶ä»–ç±»å‹çš„æ–‡ä»¶ï¼Œå¹¶å°†å…¶è½¬åŒ–ä¸ºæœ‰æ•ˆçš„æ¨¡å—ã€‚</p><p>å½“é€šè¿‡requireæˆ–importå»è§£æä¸€ä¸ªå¯¹åº”ç±»å‹çš„æ–‡ä»¶æ—¶ï¼Œ<strong>åœ¨å°†æ–‡ä»¶æ‰“åŒ…ä¹‹å‰ï¼Œå…ˆä½¿ç”¨useå±æ€§å¯¹åº”çš„loaderè½¬åŒ–</strong>ã€‚</p><p><strong>loaderå¯ä»¥è®©webpackå»å¤„ç†å…¶ä»–ç±»å‹çš„æ–‡ä»¶ï¼Œå¹¶å°†å®ƒä»¬è½¬åŒ–ä¸ºæœ‰æ•ˆçš„æ¨¡å—</strong>ã€‚</p><p><strong>css-loaderå¯ä»¥æ­£ç¡®çš„å°†å¼•å…¥çš„cssæ–‡ä»¶ä¸­å®šä¹‰çš„ç±»æ·»åŠ åˆ°å¯¹åº”çš„å…ƒç´ ä¸Šï¼Œä½†æ˜¯åœ¨headä¸­å¹¶æ²¡æœ‰å¼•å…¥cssæ–‡ä»¶ï¼Œå¯¼è‡´æ ·å¼ä¸ç”Ÿæ•ˆã€‚</strong></p><p><strong>å•ç‹¬çš„css-loaderæ— æ³•å®Œæˆï¼Œè¿˜éœ€è¦style-loaderï¼Œå®ƒå¯ä»¥å°†cssæ–‡ä»¶å¼•å…¥ã€‚</strong></p><p>webpackæ”¯æŒé“¾å¼è°ƒç”¨ï¼Œé“¾å¼ä¸Šçš„æ¯ä¸€ä¸ªloaderéƒ½å¯ä»¥å¯¹æ–‡ä»¶è¿›è¡Œè½¬æ¢ï¼Œä¼šå°†è½¬æ¢åçš„å†…å®¹ä¼ é€’ç»™ä¸‹ä¸€ä¸ªloaderã€‚webpackæœŸæœ›æœ€åä¸€ä¸ªloaderä¼šè¿”å›jsã€‚å®ƒè¿˜å¯ä»¥è§£æcssé¢„å¤„ç†è¯­è¨€å¦‚less,scssã€‚<strong>less-loaderéœ€è¦æ”¾åœ¨æœ€å³ä¾§ï¼Œç¬¬ä¸€ä¸ªæ‰§è¡Œ</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(css|less)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token comment">// css-loaderç”¨äºæ‰“åŒ…ï¼Œæ­£ç¡®è¯†åˆ«cssæ–‡ä»¶</span>
        <span class="token comment">// style-loaderå»çœŸæ­£å¼•å…¥cssæ–‡ä»¶</span>
        <span class="token comment">// é¡ºåºæ˜¯ä¸å¯ä»¥é¢ å€’çš„ï¼Œä¼šä»å³å‘å·¦ä½¿ç”¨</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;less-loader&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-2-æŠ½ç¦»css" tabindex="-1"><a class="header-anchor" href="#_4-2-æŠ½ç¦»css" aria-hidden="true">#</a> 4.2 æŠ½ç¦»css</h3><p>4.1çš„æ“ä½œå¯ä»¥å®Œæˆcssçš„å¼•å…¥ï¼Œä½†æ˜¯å¼•å…¥çš„æ–¹å¼æ˜¯åœ¨headä¸­å¢åŠ äº†å¤šä¸ªstyleå®ç°çš„ã€‚</p><p><strong>mini-css-extract-pluginå¯ä»¥cssä»£ç æ”¾åˆ°å•ç‹¬çš„æ–‡ä»¶ä¸­ï¼Œç”¨linkæ ‡ç­¾åŠ è½½</strong>ã€‚å®ƒæ˜¯åŸºäºwebpack5æ„å»ºçš„ã€‚</p><p>plugins</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
	<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;styles/[contenthash].css&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>rules</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(css|less)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token comment">// css-loaderç”¨äºæ‰“åŒ…ï¼Œæ­£ç¡®è¯†åˆ«cssæ–‡ä»¶</span>
        <span class="token comment">// style-loaderå»çœŸæ­£å¼•å…¥cssæ–‡ä»¶</span>
        <span class="token comment">// é¡ºåºæ˜¯ä¸å¯ä»¥é¢ å€’çš„ï¼Œä¼šä»å³å‘å·¦ä½¿ç”¨</span>
        <span class="token comment">// use: [&quot;style-loader&quot;, &quot;css-loader&quot;, &quot;less-loader&quot;],</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;less-loader&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3-å‹ç¼©css" tabindex="-1"><a class="header-anchor" href="#_4-3-å‹ç¼©css" aria-hidden="true">#</a> 4.3 å‹ç¼©css</h3><p><strong>css-minimizer-webpack-pluginå¯ä»¥å‹ç¼©cssæ–‡ä»¶ã€‚</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// ä¼˜åŒ–ç›¸å…³çš„é…ç½®</span>
  <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">minimizer</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-4-åŠ è½½fonts" tabindex="-1"><a class="header-anchor" href="#_4-4-åŠ è½½fonts" aria-hidden="true">#</a> 4.4 åŠ è½½fonts</h3><p><strong>åœ¨css3ä¸­æ–°å¢äº†webfontï¼Œå¯ä»¥åœ¨cssä¸­åŠ è½½ä¸€ä¸ªfontå­—ä½“åº“ï¼Œå°±å¯ä»¥å»è‡ªå®šä¹‰iconå›¾æ ‡ã€‚</strong></p><p>ä½¿ç”¨asset moduleå¯ä»¥æ¥å—å¹¶åŠ è½½ä»»ä½•æ–‡ä»¶ï¼Œç„¶åå°†å…¶è¾“å‡ºåˆ°æ„å»ºç›®å½•ã€‚</p><div class="language-css line-numbers-mode" data-ext="css"><pre class="language-css"><code><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>
  <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">&quot;iconfont&quot;</span><span class="token punctuation">;</span>
  <span class="token property">src</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./assets/hfWV8YURk7f_zuX6JKgUt.woff<span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;woff&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.icon</span> <span class="token punctuation">{</span>
  <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">&quot;iconfont&quot;</span><span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-5-åŠ è½½csv-xml" tabindex="-1"><a class="header-anchor" href="#_4-5-åŠ è½½csv-xml" aria-hidden="true">#</a> 4.5 åŠ è½½csv,xml</h3><p>æ­¤å¤–ï¼Œå¯ä»¥åŠ è½½çš„èµ„æºè¿˜æœ‰æ•°æ®ï¼Œå¦‚JSONï¼ŒCSVç­‰ã€‚ç±»å‹NodeHSï¼ŒJSONçš„æ”¯æŒå®é™…ä¸Šæ˜¯å†…ç½®çš„ï¼Œimportå¯¼å…¥å°±å¯ä»¥æ­£å¸¸è¿è¡Œã€‚è¦å¯¼å…¥CSV,TSV,XMLï¼Œå¯ä»¥ä½¿ç”¨csv-loaderï¼Œxml-loaderã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm install csv-loader xml-loader -D
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>xmlæ–‡ä»¶ä¼šè½¬æ¢ä¸ºJSå¯¹è±¡ï¼Œcsvä¼šè½¬æ¢ä¸ºæ•°ç»„ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>	  <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(csv|tsv)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">&quot;csv-loader&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.xml$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">&quot;xml-loader&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-6-åŠ è½½json-yml-toml" tabindex="-1"><a class="header-anchor" href="#_4-6-åŠ è½½json-yml-toml" aria-hidden="true">#</a> 4.6 åŠ è½½json,yml,toml</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm install toml yaml json -D
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>	  <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.toml$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;json&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">parse</span><span class="token operator">:</span> toml<span class="token punctuation">.</span>parse<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.yaml$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;json&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">parse</span><span class="token operator">:</span> yaml<span class="token punctuation">.</span>parse<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.json$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;json&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">parse</span><span class="token operator">:</span> json<span class="token punctuation">.</span>parse<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-jsç¼–è¯‘" tabindex="-1"><a class="header-anchor" href="#_5-jsç¼–è¯‘" aria-hidden="true">#</a> 5. jsç¼–è¯‘</h2><h3 id="_5-1-babel-loader" tabindex="-1"><a class="header-anchor" href="#_5-1-babel-loader" aria-hidden="true">#</a> 5.1 babel-loader</h3><p>ES6çš„ä»£ç ä¼šè¢«ç›´æ¥æ‰“åŒ…åˆ°distä¸­ï¼Œå¦‚æœæµè§ˆå™¨ä¸æ”¯æŒES6çš„è¯ï¼Œä¼šè¿è¡Œå¤±è´¥ã€‚å› æ­¤éœ€è¦å°†å…¶è½¬åŒ–ä¸ºES5çš„ä»£ç ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm install babel-loader @babel/core @babel/preset-env -D
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><strong>babel-loaderï¼šåœ¨Webpacké‡Œåº”ç”¨babelè§£æES6çš„æ¡¥æ¢</strong></li><li><strong>@babel/coreï¼šbabelæ ¸å¿ƒæ¨¡å—</strong></li><li><strong>babel/preset-envï¼šbabelé¢„è®¾ï¼Œä¸€ç»„babelæ’ä»¶çš„é›†åˆ</strong></li></ul><p>ä»£ç ä¸­æ—¢å¯ä»¥åŠ è½½æœ¬åœ°è‡ªå·±å†™çš„jsï¼Œä¹Ÿå¯ä»¥åŠ è½½å…¨å±€é‡Œçš„node_modulesé‡Œçš„jsæ–‡ä»¶(ä¸éœ€è¦babel-loaderçš„ç¼–è¯‘)ï¼Œæ‰€ä»¥éœ€è¦æ’é™¤node_moduesä¸­çš„ä»£ç ã€‚</p><h3 id="_5-2-regeneratorruntime" tabindex="-1"><a class="header-anchor" href="#_5-2-regeneratorruntime" aria-hidden="true">#</a> 5.2 regeneratorRuntime</h3><p>regeneratorRuntime æ˜¯webpackæ‰“åŒ…ç”Ÿæˆçš„å…¨å±€è¾…åŠ©å‡½æ•°ï¼Œç”±babelç”Ÿæˆï¼Œç”¨äºå…¼å®¹async/awaitçš„è¯­æ³•ã€‚</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># è¿™ä¸ªåŒ…åŒ…å«äº†regeneratorRuntimeï¼Œè¿è¡Œæ—¶éœ€è¦</span>
npm install @babel<span class="token operator">/</span>runtime <span class="token operator">-</span>D

<span class="token comment"># åœ¨éœ€è¦regeneratorRuntimeçš„åœ°æ–¹è‡ªåŠ¨requireå¯¼åŒ…ï¼Œç¼–è¯‘æ—¶éœ€è¦</span>
npm install @babel<span class="token operator">/</span>plugin<span class="token operator">-</span>transform<span class="token operator">-</span>runtime <span class="token operator">-</span>D
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¿®æ”¹babelé…ç½®</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&quot;babel-loader&quot;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token comment">// plugins: [[&quot;@babel/plugin-transform-runtime&quot;]],</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-ä»£ç åˆ†ç¦»" tabindex="-1"><a class="header-anchor" href="#_6-ä»£ç åˆ†ç¦»" aria-hidden="true">#</a> 6. ä»£ç åˆ†ç¦»</h2><h3 id="_6-1-ä»£ç åˆ†ç¦»æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#_6-1-ä»£ç åˆ†ç¦»æ–¹æ³•" aria-hidden="true">#</a> 6.1 ä»£ç åˆ†ç¦»æ–¹æ³•</h3><p>webpackå¯ä»¥å°†ä»£ç åˆ†ç¦»åˆ°ä¸åŒçš„bundleä¸­ï¼ŒæŒ‰éœ€åŠ è½½bundleï¼Œæˆ–è€…å¹¶è¡ŒåŠ è½½bundleã€‚ä»£ç åˆ†ç¦»å¯ä»¥ç”¨äºè·å–æ›´å°çš„bundleï¼Œä»¥åŠæ§åˆ¶èµ„æºåŠ è½½çš„ä¼˜å…ˆçº§ã€‚</p><p>å¸¸ç”¨çš„ä»£ç åˆ†ç¦»æ–¹æ³•æœ‰ä¸‰ç§ï¼š</p><ul><li><strong>é…ç½®å…¥å£èµ·ç‚¹ï¼šä½¿ç”¨entryé…ç½®ï¼Œæ‰‹åŠ¨åœ°åˆ†ç¦»ä»£ç ã€‚å¦‚æœæ˜¯å¤šä¸ªå…¥å£ï¼Œé‚£ä¹ˆè¿™äº›å¤šä¸ªå…¥å£çš„æ–‡ä»¶ä¼šåœ¨æ¯ä¸ªåŒ…ä¸­åˆ†åˆ«åœ°é‡å¤æ‰“åŒ…ã€‚</strong></li><li><strong>é˜²æ­¢é‡å¤çš„åˆ†ç¦»æ–¹æ³•ï¼šåœ¨å…¥å£ä½¿ç”¨entry dependenciesæˆ–è€…SplitChunkPluginå»é‡å’Œåˆ†ç¦»ä»£ç ã€‚</strong></li><li><strong>åŠ¨æ€å¯¼å…¥ï¼šé€šè¿‡æ¨¡å—çš„å†…è”å‡½æ•°importè°ƒç”¨æ¥åˆ†ç¦»ä»£ç ã€‚</strong></li></ul><h3 id="_6-2-å…¥å£èµ·ç‚¹" tabindex="-1"><a class="header-anchor" href="#_6-2-å…¥å£èµ·ç‚¹" aria-hidden="true">#</a> 6.2 å…¥å£èµ·ç‚¹</h3><p>éœ€è¦åŒæ—¶é…ç½®entryå’Œoutputä¸¤ä¸ªå¯¹è±¡ã€‚å½“å‰é…ç½®ä¸‹ï¼Œå¦‚æœæœ‰ä¸¤ä¸ªæ–‡ä»¶å¼•å…¥äº†åŒæ ·çš„åº“ï¼Œåº“ä¼šè¢«æ‰“åŒ…ä¸¤æ¬¡ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>	<span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">index</span><span class="token operator">:</span> <span class="token string">&quot;./src/index.js&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">another</span><span class="token operator">:</span> <span class="token string">&quot;./src/another-module.js&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// filename: &quot;bundle.js&quot;,</span>
    <span class="token comment">// [name]æ˜¯å…¥å£chunkçš„keyçš„åå­—</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;[name].bundle.js&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;./dist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// æ¸…ç†å½“å‰æ‰“åŒ…ä¹‹å¤–çš„æ–‡ä»¶</span>
    <span class="token literal-property property">clean</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// webpacké»˜è®¤ç”Ÿæˆæ–‡ä»¶åï¼š[contenthash]ï¼Œæ ¹æ®æ–‡ä»¶çš„å†…å®¹ç”Ÿæˆä¸€ä¸ªå“ˆå¸Œçš„å­—ç¬¦ä¸²</span>
    <span class="token comment">// [ext]è¡¨ç¤ºæºæ–‡ä»¶çš„æ‰©å±•å</span>
    <span class="token literal-property property">assetModuleFilename</span><span class="token operator">:</span> <span class="token string">&quot;images/[contenthash][ext]&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-3-é˜²æ­¢é‡å¤" tabindex="-1"><a class="header-anchor" href="#_6-3-é˜²æ­¢é‡å¤" aria-hidden="true">#</a> 6.3 é˜²æ­¢é‡å¤</h3><p><strong>éœ€è¦é…ç½®entry.dependOn optioné€‰é¡¹ï¼Œå¯ä»¥å°†ä¸€äº›å…¬å…±çš„æ–‡ä»¶æŠ½ç¦»æˆå•ç‹¬çš„chunkï¼Œåœ¨å¤šä¸ªchunkä¹‹é—´å…±äº«ä»£ç ã€‚</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">index</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token keyword">import</span><span class="token operator">:</span> <span class="token string">&quot;./src/index.js&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">dependOn</span><span class="token operator">:</span> <span class="token string">&quot;shared&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">another</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword">import</span><span class="token operator">:</span> <span class="token string">&quot;./src/another-module.js&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">dependOn</span><span class="token operator">:</span> <span class="token string">&quot;shared&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// sharedè¿™ä¸ªåå­—æ˜¯è‡ªå®šä¹‰çš„ï¼Œè¡¨ç¤ºå…±äº«æ¨¡å—</span>
    <span class="token comment">// å½“ä»¥ä¸Šä¸¤ä¸ªæ–‡ä»¶ä¸­éƒ½æœ‰lodashæ—¶ï¼Œå°±ä¼šæŠŠlodashæŠ½ç¦»å‡ºæ¥</span>
    <span class="token literal-property property">shared</span><span class="token operator">:</span> <span class="token string">&quot;lodash&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>è¿˜å¯ä»¥ä½¿ç”¨webpackå†…ç½®çš„æ’ä»¶split-chunks-pluginï¼Œå¯ä»¥å°†æ¨¡å—ä¾èµ–çš„å…¬å…±çš„ä¸€äº›æ–‡ä»¶æŠ½ç¦»æˆå•ç‹¬çš„chunkã€‚</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// ä¼˜åŒ–ç›¸å…³çš„é…ç½®</span>
  <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">minimizer</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

    <span class="token comment">// æŠ½ç¦»å…¬å…±ä»£ç çš„æ’ä»¶</span>
    <span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">&quot;all&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-4-åŠ¨æ€å¯¼å…¥" tabindex="-1"><a class="header-anchor" href="#_6-4-åŠ¨æ€å¯¼å…¥" aria-hidden="true">#</a> 6.4 åŠ¨æ€å¯¼å…¥</h3><p>å½“è®¾è®¡åŠ¨æ€ä»£ç æ‹†åˆ†æ—¶ï¼Œwebpackæä¾›äº†ä¸¤ç§ç±»ä¼¼çš„æŠ€æœ¯ã€‚</p><p><strong>ç¬¬ä¸€ç§ï¼Œä¹Ÿæ˜¯æ¨èçš„æ–¹å¼ï¼Œä½¿ç”¨ECMASrciptæä¾›çš„importè¯­æ³•ã€‚</strong></p><p><strong>ç¬¬äºŒç§ï¼Œwebpackçš„é—ç•™åŠŸèƒ½ï¼Œä½¿ç”¨webpackç‰¹å®šçš„require.ensureã€‚</strong></p><p>åªæœ‰åŠ¨æ€å¯¼å…¥æ—¶ï¼Œwebpackå°±å¯ä»¥æ­£å¸¸æ‰“åŒ…ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">getComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// importå‡½æ•°è¿”å›çš„ç»“æœæ˜¯ä¸€ä¸ªpromise</span>
  <span class="token keyword">return</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;lodash&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token operator">:</span> _ <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> ele <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ele<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;C&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;WEBPACK&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> ele<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">getComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">ele</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å½“åŠ¨æ€+é™æ€æ··åˆæ—¶ï¼Œå°±éœ€è¦å¼€å¯splitChunksé€‰é¡¹</strong></p><h3 id="_6-5-æ‡’åŠ è½½" tabindex="-1"><a class="header-anchor" href="#_6-5-æ‡’åŠ è½½" aria-hidden="true">#</a> 6.5 æ‡’åŠ è½½</h3><p>æ‡’åŠ è½½æˆ–æŒ‰éœ€åŠ è½½ï¼Œæ˜¯ä¸€ç§ä¼˜åŒ–ç½‘é¡µæˆ–åº”ç”¨çš„æ–¹å¼ã€‚å®é™…ä¸Šæ˜¯å…ˆæŠŠä»£ç åœ¨ä¸€äº›é€»è¾‘æ–­ç‚¹å¤„åˆ†ç¦»å¼€ï¼Œç„¶ååœ¨ä»£ç å—ä¸­å®ŒæˆæŸäº›æ“ä½œåï¼Œç«‹å³å¼•ç”¨æˆ–å³å°†å¼•ç”¨å¦å¤–ä¸€äº›æ–°çš„ä»£ç å—ã€‚æ‡’åŠ è½½å¯ä»¥åŠ å¿«åº”ç”¨çš„åˆå§‹åŠ è½½é€Ÿåº¦ï¼Œå‡è½»å®ƒçš„æ€»ä½“ä½“ç§¯ã€‚</p><p><strong>åœ¨å‡½æ•°å†…éƒ¨è°ƒç”¨importå‡½æ•°ï¼Œå¯ä»¥å®ç°æ‡’åŠ è½½ã€‚</strong></p><p><em><em>importçš„èµ„æºå‰åŠ /</em> webpackChunkName: &#39;math&#39; <em>/ ï¼Œå¯ä»¥ä¿®æ”¹æ‰“åŒ…çš„æ–‡ä»¶åã€‚</em></em></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ä¿®æ”¹æ‰“åŒ…çš„jsæ–‡ä»¶å: /**/</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: &#39;math&#39; */</span> <span class="token string">&quot;./math.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> add <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">232</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-6-é¢„è·å–å’Œé¢„åŠ è½½" tabindex="-1"><a class="header-anchor" href="#_6-6-é¢„è·å–å’Œé¢„åŠ è½½" aria-hidden="true">#</a> 6.6 é¢„è·å–å’Œé¢„åŠ è½½</h3><p>wepackv4.6+å¢åŠ äº†é¢„è·å–å’Œé¢„åŠ è½½ç­‰å¾…æ”¯æŒã€‚</p><p>åœ¨å£°æ˜importæ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™äº›å†…ç½®æŒ‡ä»¤ï¼Œè®©webpackè¾“å‡ºâ€œsource hintâ€èµ„æºæç¤ºï¼Œæ¥å‘ŠçŸ¥æµè§ˆå™¨ï¼š</p><ul><li><strong>prefetché¢„è·å–ï¼šå°†æ¥æŸäº›å¯¼èˆªä¸‹å¯èƒ½éœ€è¦çš„èµ„æºã€‚</strong></li><li><strong>preloadé¢„åŠ è½½ï¼šå½“å‰å¯¼èˆªä¸‹å¯èƒ½éœ€è¦çš„èµ„æºã€‚</strong></li></ul><p>prefetch</p><p><strong>æ³¨é‡ŠwebpackPrefetch ä¼šä½¿å¾—åœ¨headä¸­å¢åŠ ä¸€ä¸ªlinkæ ‡ç­¾ï¼Œå¯¹åº”srcä¼šåœ¨é¦–é¡µé¢åŠ è½½å®Œæ¯•ï¼Œç½‘ç»œç©ºé—²çš„æ—¶å€™å†å»åŠ è½½æ‰“åŒ…å¥½çš„math.bundle.jsã€‚åœ¨éœ€è¦åŠ¨æ€å¯¼å…¥èµ„æºæ—¶ï¼Œä¼šå†æ¬¡åŠ è½½ã€‚</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: &#39;math&#39;, webpackPrefetch:true */</span> <span class="token string">&quot;./math.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> add <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">232</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>prefetch<span class="token punctuation">&quot;</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>script<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file:///D:/vscode/WebpackDemo/lesson08/dist/math.bundle.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>preload</p><p><strong>æ³¨é‡ŠwebpackPreloadåœ¨é¦–é¡µé¢åŠ è½½æ—¶ä¸ä¼šä¸‹è½½srcï¼Œåœ¨åŠ¨æ€å¯¼å…¥æ—¶å†åŠ è½½ï¼Œä¸æ‡’åŠ è½½æ•ˆæœç±»ä¼¼ã€‚preloadå¯ä»¥å®ç°æ¨¡å—å¹¶è¡ŒåŠ è½½ã€‚</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: &#39;math&#39;, webpackPreload:true */</span> <span class="token string">&quot;./math.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> add <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">232</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_7-ç¼“å­˜" tabindex="-1"><a class="header-anchor" href="#_7-ç¼“å­˜" aria-hidden="true">#</a> 7. ç¼“å­˜</h2><h3 id="_7-1-è¾“å‡ºä¸šåŠ¡ä»£ç " tabindex="-1"><a class="header-anchor" href="#_7-1-è¾“å‡ºä¸šåŠ¡ä»£ç " aria-hidden="true">#</a> 7.1 è¾“å‡ºä¸šåŠ¡ä»£ç </h3><p><strong>è·å–èµ„æºæ˜¯æ¯”è¾ƒè€—æ—¶çš„ï¼Œå¯ä»¥é€šè¿‡å‘½ä¸­ç¼“å­˜ï¼Œé™ä½ç½‘ç»œæµé‡ï¼Œä½¿ç½‘ç«™çš„åŠ è½½é€Ÿåº¦æ›´å¿«ã€‚</strong></p><p><strong>éƒ¨ç½²æ–°ç‰ˆæœ¬æ—¶ï¼Œå¦‚æœä¸æ›´æ”¹èµ„æºçš„æ–‡ä»¶åï¼Œæµè§ˆå™¨å¯èƒ½ä¼šè®¤ä¸ºæ–‡ä»¶æœªè¢«æ›´æ–°ï¼Œä»è€Œä½¿ç”¨ç¼“å­˜ï¼Œä¼šå¯¹è·å–æ–°ç‰ˆæœ¬é€ æˆå½±å“ã€‚</strong></p><p><strong>ç¡®ä¿webpackæ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶å¯ä»¥è¢«å®¢æˆ·ç«¯ç¼“å­˜ï¼Œå¹¶ä¸”åœ¨æ–‡ä»¶å†…å®¹å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè¿˜èƒ½å¤Ÿè¯·æ±‚åˆ°æ–°çš„æ–‡ä»¶ã€‚</strong></p><p>å¯ä»¥é€šè¿‡æ›¿æ¢<strong>out.filenameä¸­çš„substitutionsè®¾ç½®</strong>ï¼Œæ¥å®šä¹‰è¾“å‡ºæ–‡ä»¶çš„åç§°ã€‚<strong>webpackæä¾›äº†ä¸€ç§ä½¿ç”¨substitutionï¼ˆå¯æ›¿æ¢æ¨¡æ¿å­—ç¬¦ä¸²ï¼‰çš„æ–¹å¼ã€‚é€šè¿‡å¸¦æ‹¬å·å­—ç¬¦ä¸²æ¥æ¨¡æ¿åŒ–æ–‡ä»¶å</strong>ã€‚å…¶ä¸­**[contenthash] substitution å°†æ ¹æ®èµ„æºå†…å®¹æ„å»ºå‡ºå”¯ä¸€hash**ã€‚å½“èµ„æºå†…å®¹å‘ç”Ÿå˜åŒ–æ—¶ï¼Œ[contenthash]ä¹Ÿä¼šå˜åŒ–ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// filename: &quot;bundle.js&quot;,</span>
    <span class="token comment">// [name]æ˜¯å…¥å£chunkçš„keyçš„åå­—</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;[name].[contenthash].js&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-2-ç¼“å­˜ç¬¬ä¸‰æ–¹åº“" tabindex="-1"><a class="header-anchor" href="#_7-2-ç¼“å­˜ç¬¬ä¸‰æ–¹åº“" aria-hidden="true">#</a> 7.2 ç¼“å­˜ç¬¬ä¸‰æ–¹åº“</h3><p>å°†ç¬¬ä¸‰æ–¹åº“libraryæå–åˆ°å•ç‹¬çš„wendor chunkæ–‡ä»¶ä¸­ï¼Œæ˜¯æ¯”è¾ƒæ¨èçš„åšæ³•ã€‚ç¬¬ä¸‰åº“å¾ˆå°‘é¢‘ç¹ä¿®æ”¹ï¼Œå¯ä»¥åˆ©ç”¨clienté•¿æ•ˆç¼“å­˜æœºåˆ¶ï¼Œå‘½ä¸­ç¼“å­˜æ¥æ¶ˆé™¤è¯·æ±‚ï¼Œå¹¶å‡å°‘å‘serverè·å–èµ„æºï¼Œä¿æŒclientå’Œserverä»£ç ç‰ˆæœ¬ä¸€ç›´ã€‚</p><p><strong>åœ¨optimization.splitChunksæ·»åŠ cacheGroupså‚æ•°å¹¶æ„å»ºï¼š</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// chunks: &quot;all&quot;,</span>
      <span class="token comment">// ç¼“å­˜ç»„ï¼Œç¼“å­˜ç¬¬ä¸‰æ–¹æ–‡ä»¶</span>
      <span class="token literal-property property">cacheGroups</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// vendor:æå–å…¬å…±æ–¹æ³•</span>
        <span class="token literal-property property">vendor</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\\/]node_modules[\\/]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;vendors&quot;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">&quot;all&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-3-æ–‡ä»¶æ”¾åœ¨æ–‡ä»¶å¤¹ä¸­" tabindex="-1"><a class="header-anchor" href="#_7-3-æ–‡ä»¶æ”¾åœ¨æ–‡ä»¶å¤¹ä¸­" aria-hidden="true">#</a> 7.3 æ–‡ä»¶æ”¾åœ¨æ–‡ä»¶å¤¹ä¸­</h3><p>ç›®å‰jsæ–‡ä»¶éƒ½åœ¨distæ–‡ä»¶å¤¹çš„æ ¹ç›®å½•ä¸‹ï¼Œéœ€è¦æŠŠå®ƒä»¬æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;scripts/[name].[contenthash].js&quot;</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_8-æ‹†åˆ†å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒé…ç½®" tabindex="-1"><a class="header-anchor" href="#_8-æ‹†åˆ†å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒé…ç½®" aria-hidden="true">#</a> 8. æ‹†åˆ†å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒé…ç½®</h2><h3 id="_8-1-å…¬å…±è·¯å¾„" tabindex="-1"><a class="header-anchor" href="#_8-1-å…¬å…±è·¯å¾„" aria-hidden="true">#</a> 8.1 å…¬å…±è·¯å¾„</h3><p>ç›®å‰åªèƒ½æ‰‹åŠ¨è°ƒæ•´modeé€‰é¡¹åˆ‡æ¢ç¯å¢ƒï¼Œå¹¶ä¸”å¾ˆå¤šé…ç½®åœ¨ç”Ÿäº§ç¯å¢ƒå’Œå¼€å‘ç¯å¢ƒä¸­æ˜¯ä¸ä¸€è‡´çš„ã€‚</p><p>**å…¬å…±è·¯å¾„ï¼Œå³ä½¿ç”¨publicPathé…ç½®ï¼Œå¯ä»¥æŒ‡å®šæ‰€æœ‰èµ„æºçš„åŸºç¡€è·¯å¾„ã€‚**åœ¨å¼€å‘ç¯å¢ƒä¸­ï¼Œé€šå¸¸æœ‰ä¸€ä¸ªassetsæ–‡ä»¶å¤¹ï¼Œä¸ç´¢å¼•é¡µé¢å¤„äºåŒä¸€çº§åˆ«ï¼Œä½†ç”Ÿäº§ç¯å¢ƒå¯èƒ½ä¼šå°†å…¶æ‰˜ç®¡è‡³CDNã€‚å¯ä»¥æŒ‡å®šå‰ç¼€ï¼Œä½¿å¾—å¼•ç”¨è·¯å¾„å˜ä¸ºç»å¯¹å¼•ç”¨ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:8080/&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span>
      <span class="token attr-name">defer</span>
      <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://localhost:8080/scripts/vendors.29025132a649c43205f8.js<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8-2-ç¯å¢ƒå˜é‡" tabindex="-1"><a class="header-anchor" href="#_8-2-ç¯å¢ƒå˜é‡" aria-hidden="true">#</a> 8.2 ç¯å¢ƒå˜é‡</h3><p>environment variableç¯å¢ƒå˜é‡å¯ä»¥æ¶ˆé™¤webpack.config.jsåœ¨å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒä¹‹é—´çš„å·®å¼‚ã€‚</p><p><strong>webackå‘½ä»¤è¡Œç¯å¢ƒé…ç½®çš„--envå‚æ•°ï¼Œå¯ä»¥ä¼ å…¥ä»»æ„æ•°é‡çš„ç¯å¢ƒå˜é‡ã€‚è€Œåœ¨ webpack.config.jsä¸­å¯ä»¥è®¿é—®åˆ°è¿™äº›ç¯å¢ƒå˜é‡ã€‚ä¾‹å¦‚ï¼Œ--env productionæˆ–--env goal=localã€‚</strong></p><p>å¯¹äºæˆ‘ä»¬çš„ webpacké…ç½®ï¼Œæœ‰ä¸€ä¸ªå¿…é¡»è¦ä¿®æ”¹ä¹‹å¤„ã€‚é€šå¸¸, module.exportsæŒ‡å‘é…ç½®å¯¹è±¡ã€‚è¦ä½¿ç”¨env å˜é‡ï¼Œä½ å¿…é¡»å°†module.exportsè½¬æ¢æˆä¸€ä¸ªå‡½æ•°:</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># å‘½ä»¤è¡Œå¯ä»¥å¢åŠ æŒ‡å®šç¯å¢ƒçš„å‚æ•°</span>
npx webpack <span class="token operator">-</span><span class="token operator">-</span>env production
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">env</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">mode</span><span class="token operator">:</span> env<span class="token punctuation">.</span>production <span class="token operator">?</span> <span class="token string">&quot;production&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;development&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>é‡æ–°åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹æ‰“åŒ…åçš„æ–‡ä»¶ï¼Œæ˜¯æœªè¢«å‹ç¼©çš„ã€‚åŸå› æ˜¯é…ç½®äº†optimization.minimizerå¯¹cssè¿›è¡Œå‹ç¼©ï¼Œéœ€è¦å†é‡æ–°é…ç½®ä¸€ä¸‹webpackå¼€ç®±å³ç”¨çš„terseræ¥å‹ç¼©jsä»£ç ã€‚ï¼ˆåªæœ‰åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹å‹ç¼©ï¼Œå¼€å‘ç¯å¢ƒä¸å‹ç¼©ï¼‰</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm install terser-webpack-plugin -D
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> Terser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;terser-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">minimizer</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8-3-æ‹†åˆ†é…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_8-3-æ‹†åˆ†é…ç½®æ–‡ä»¶" aria-hidden="true">#</a> 8.3 æ‹†åˆ†é…ç½®æ–‡ä»¶</h3><p>æ€è·¯ï¼šå°†ä¸åŒç¯å¢ƒçš„é…ç½®æ–‡ä»¶æ‹†åˆ†ä¸ºä¸¤ä¸ªæ–‡ä»¶</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># -c æŒ‡å®šé…ç½®æ–‡ä»¶</span>
npx webpack <span class="token operator">-</span>c <span class="token punctuation">.</span><span class="token operator">/</span>webpack<span class="token punctuation">.</span>config<span class="token punctuation">.</span>dev<span class="token punctuation">.</span>js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8-4-npmè„šæœ¬" tabindex="-1"><a class="header-anchor" href="#_8-4-npmè„šæœ¬" aria-hidden="true">#</a> 8.4 npmè„šæœ¬</h3><p>é…ç½®npmè„šæœ¬ï¼Œæ¥ç®€åŒ–å‘½ä»¤è¡Œè¾“å…¥ï¼Œæ­¤æ—¶å¯ä»¥çœç•¥npxï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// é…ç½®ç®€åŒ–å‘½ä»¤</span>
<span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npx webpack serve -c ./config/webpack.config.dev.js&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npx webpack -c ./config/webpack.config.dev.js&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token comment">// æ‰§è¡Œ</span>
npm run start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8-5-æå–å…¬å…±é…ç½®" tabindex="-1"><a class="header-anchor" href="#_8-5-æå–å…¬å…±é…ç½®" aria-hidden="true">#</a> 8.5 æå–å…¬å…±é…ç½®</h3><p>å°†ä¸¤ä¸ªé…ç½®ä¸­çš„å…¬å…±éƒ¨åˆ†æå–åˆ°commonæ–‡ä»¶ä¸­ï¼Œä½¿ç”¨webpack-mergeå®ç°æ·±åˆå¹¶ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm install webpack-merge -D
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> merge <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack-merge&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> commonConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./webpack.config.common&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> productionConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./webpack.config.prod&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> developmentConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./webpack.config.dev&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">env</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> env<span class="token punctuation">.</span>development<span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token function">merge</span><span class="token punctuation">(</span>commonConfig<span class="token punctuation">,</span> developmentConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> env<span class="token punctuation">.</span>production<span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token function">merge</span><span class="token punctuation">(</span>commonConfig<span class="token punctuation">,</span> productionConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;No match configuration was found&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="äºŒã€webpack-é«˜çº§ç¯‡" tabindex="-1"><a class="header-anchor" href="#äºŒã€webpack-é«˜çº§ç¯‡" aria-hidden="true">#</a> äºŒã€webpack-é«˜çº§ç¯‡</h1><h2 id="_1-å¼€å‘æ•ˆç‡ä¸å¼€å‘è§„èŒƒ" tabindex="-1"><a class="header-anchor" href="#_1-å¼€å‘æ•ˆç‡ä¸å¼€å‘è§„èŒƒ" aria-hidden="true">#</a> 1. å¼€å‘æ•ˆç‡ä¸å¼€å‘è§„èŒƒ</h2><h3 id="_1-1-source-map" tabindex="-1"><a class="header-anchor" href="#_1-1-source-map" aria-hidden="true">#</a> 1.1 source-map</h3><p>å¼€å‘ç¯å¢ƒæœ€ä¸å¯å°‘çš„åŠŸèƒ½æ˜¯-debugï¼Œsource-mapå¯ä»¥å°†æŠ¥é”™ä¿¡æ¯æ˜ å°„åˆ°æºç ä¸Šã€‚<strong>webpackå·²ç»å†…ç½®äº†source-mapçš„åŠŸèƒ½</strong>ï¼Œæˆ‘ä»¬åªéœ€è¦é€šè¿‡ç®€å•çš„é…ç½®ï¼Œå°†å¯ä»¥å¼€å¯å®ƒã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">devtool</span><span class="token operator">:</span> <span class="token string">&#39;source-map&#39;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å½“æˆ‘ä»¬æ‰§è¡Œæ‰“åŒ…å‘½ä»¤ä¹‹åï¼Œæˆ‘ä»¬å‘ç°bundleçš„æœ€åä¸€è¡Œæ€»æ˜¯ä¼šå¤šå‡ºä¸€ä¸ªæ³¨é‡Šï¼ŒæŒ‡å‘æ‰“åŒ…å‡ºçš„bundle.map.js(sourcemapæ–‡ä»¶)ã€‚sourcemapæ–‡ä»¶ç”¨æ¥æè¿°æºç æ–‡ä»¶å’Œbundleæ–‡ä»¶çš„ä»£ç ä½ç½®æ˜ å°„å…³ç³»ã€‚åŸºäºå®ƒï¼Œæˆ‘ä»¬å°†bundleæ–‡ä»¶çš„é”™è¯¯ä¿¡æ¯æ˜ å°„åˆ°æºç æ–‡ä»¶ä¸Šã€‚</strong></p><p>é™¤äº†&#39;source-map&#39;å¤–ï¼Œè¿˜å¯ä»¥åŸºäºæˆ‘ä»¬çš„éœ€æ±‚è®¾ç½®å…¶ä»–å€¼ï¼Œwebpackâ€”-devtoolä¸€å…±æä¾›äº†7ç§SourceMapæ¨¡å¼:</p><table><thead><tr><th style="text-align:left;">æ¨¡å¼</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td style="text-align:left;">eval</td><td>æ¯ä¸ªmoduleä¼šå°è£…åˆ°evalé‡ŒåŒ…è£¹èµ·æ¥æ‰§è¡Œï¼Œå¹¶ä¸”ä¼šåœ¨æœ«å°¾è¿½åŠ æ³¨é‡Š//@sourceURLï¼Œdevä¸‹é»˜è®¤å€¼</td></tr><tr><td style="text-align:left;">source-map</td><td>ç”Ÿæˆä¸€ä¸ªSourceMapæ–‡ä»¶</td></tr><tr><td style="text-align:left;">hidden-source-map</td><td>å’Œsource-mapä¸€æ ·ï¼Œä½†ä¸ä¼šåœ¨bundleæœªå°¾è¿½åŠ æ³¨é‡Šã€‚èƒ½ç”Ÿæˆmapï¼Œ<strong>ä¸èƒ½é”å®šè¡Œæ•°</strong></td></tr><tr><td style="text-align:left;">inline-source-map</td><td>ç”Ÿæˆä¸€ä¸ªDataUrlå½¢å¼çš„SourceMapæ–‡ä»¶ï¼Œä¸ä¼šå•ç‹¬æ‰“åŒ…ä¸€ä¸ªmapæ–‡ä»¶</td></tr><tr><td style="text-align:left;">eval-source-map</td><td>æ¯ä¸ªmoduleä¼šé€šè¿‡eval()æ¥æ‰§è¡Œï¼å¹¶ç›®ç”Ÿæˆä¸€ä¸ªDataUrlå½¢å¼çš„SourceMap</td></tr><tr><td style="text-align:left;">cheap-source-map</td><td>ç”Ÿæˆä¸€ä¸ªæ²¡æœ‰åˆ—ä¿¡æ¯ (column-mappings)çš„SourceMapsæ–‡ä»¶ï¼Œä¸åŒ…å«loaderçš„source-mapï¼Œ<strong>jsç¼–è¯‘åæ— æ³•é”å®šè¡Œæ•°</strong></td></tr><tr><td style="text-align:left;">cheap-module-source-map</td><td>(<strong>æ¨èä½¿ç”¨</strong>)ç”Ÿæˆä¸€ä¸ªæ²¡æœ‰åˆ—ä¿¡æ¯çš„SourceMapsæ–‡ä»¶ï¼ŒåŒæ—¶loaderçš„sourcemapä¹Ÿç®€åŒ–ä¸ºåªåŒ…å«å¯¹åº”è¡Œ</td></tr></tbody></table><p>è¦æ³¨æ„çš„æ˜¯ï¼Œç”Ÿäº§ç¯å¢ƒæˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šå¼€å¯source-mapåŠŸèƒ½ï¼Œä¸»è¦æœ‰ä¸¤ç‚¹åŸå› ï¼š</p><ul><li>é€šè¿‡bundleå’Œsourcemapæ–‡ä»¶ï¼Œå¯ä»¥åç¼–è¯‘å‡ºæºç â€•-â€”-ä¹Ÿå°±æ˜¯è¯´ï¼Œçº¿ä¸Šäº§ç‰©æœ‰soucemapæ–‡ä»¶çš„è¯ï¼Œå°±æ„å‘³ç€æœ‰æš´æ¼æºç çš„é£é™©ã€‚</li><li>2æˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°,sourcemapæ–‡ä»¶çš„ä½“ç§¯ç›¸å¯¹æ¯”è¾ƒå·¨å¤§ã€‚</li></ul><h3 id="_1-2-devserver" tabindex="-1"><a class="header-anchor" href="#_1-2-devserver" aria-hidden="true">#</a> 1.2 devServer</h3><p>å¼€å‘ç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬å¾€å¾€éœ€è¦å¯åŠ¨ä¸€ä¸ªwebæœåŠ¡ï¼Œè¯»å–æ‰“åŒ…äº§ç‰©ã€‚webpackå†…ç½®äº†è¿™æ ·çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬åªéœ€è¦ç®€å•çš„é…ç½®å°±å¯ä»¥å¼€å¯å®ƒã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>yarn add webpack-dev-server -D
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>devServer.proxyåŸºäºå¼ºå¤§çš„ä¸­é—´ä»¶ http-proxy-middleware å®ç°çš„</strong>ï¼Œå› æ­¤å®ƒæ”¯æŒå¾ˆå¤šçš„é…ç½®é¡¹ã€‚æˆ‘ä»¬åŸºäºæ­¤ï¼Œå¯ä»¥åšåº”å¯¹ç»å¤§å¤šæ•°å¼€å‘åœºæ™¯çš„å®šåˆ¶åŒ–é…ç½®ã€‚</p><h4 id="åŸºç¡€ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#åŸºç¡€ä½¿ç”¨" aria-hidden="true">#</a> åŸºç¡€ä½¿ç”¨</h4><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;./dist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// è®¾ç½®æ˜¯å¦åœ¨æœåŠ¡å™¨ç«¯è¿›è¡Œä»£ç å‹ç¼©ï¼Œä»¥å‡å°‘ä¼ è¾“è¿‡ç¨‹ä¸­çš„æ•°æ®å¤§å°</span>
    <span class="token comment">// Accept-Encoding: gzipï¼Œè¯´æ˜æœåŠ¡å™¨åˆ°å®¢æˆ·ç«¯ä¼ è¾“çš„è¿‡ç¨‹ä¸­ï¼Œæ–‡ä»¶æ˜¯è¢«å‹ç¼©çš„</span>
    <span class="token literal-property property">compress</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="æ·»åŠ å“åº”å¤´" tabindex="-1"><a class="header-anchor" href="#æ·»åŠ å“åº”å¤´" aria-hidden="true">#</a> æ·»åŠ å“åº”å¤´</h4><p>æœ‰äº›åœºæ™¯éœ€æ±‚ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºæ‰€æœ‰å“åº”æ·»åŠ headersï¼Œæ¥å¯¹èµ„æºçš„è¯·æ±‚å’Œå“åº”æ‰“å…¥æ ‡å¿—ï¼Œä»¥ä¾¿åšä¸€äº›å®‰å…¨é˜²èŒƒï¼Œæˆ–è€…æ–¹ä¾¿å‘ç”Ÿå¼‚å¸¸ååšè¯·æ±‚çš„é“¾è·¯è¿½è¸ªã€‚æ¯”å¦‚:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;./dist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;X-Access-Token&quot;</span><span class="token operator">:</span> <span class="token string">&quot;adfasdfa&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ headersçš„é…ç½®ä¹Ÿå¯ä»¥ä¼ ä¸€ä¸ªå‡½æ•°ï¸°</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function-variable function">headers</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;X-Bar&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;key1=value1&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å¼€å¯ä»£ç†" tabindex="-1"><a class="header-anchor" href="#å¼€å¯ä»£ç†" aria-hidden="true">#</a> å¼€å¯ä»£ç†</h4><p>æˆ‘ä»¬æ‰“åŒ…å‡ºçš„js bundleé‡Œæœ‰æ—¶ä¼šæœ‰ä¸€äº›å¯¹ç‰¹å®šæ¥å£çš„ç½‘ç»œè¯·æ±‚(ajax/fetch)ã€‚ä¸ºäº†è§£å†³è·¨åŸŸï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨devServerè‡ªå¸¦çš„proxy</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;/api&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:9000&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token comment">// app.js</span>
<span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&quot;/api/hello&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> res<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="https" tabindex="-1"><a class="header-anchor" href="#https" aria-hidden="true">#</a> https</h4><p>å°†æœ¬åœ°çš„httpæœåŠ¡å˜æˆhttpsæœåŠ¡ï¼Œé…ç½®</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">https</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼Œæ­¤æ—¶æˆ‘ä»¬è®¿é—®http:/localhost:portæ˜¯æ— æ³•è®¿é—®æˆ‘ä»¬çš„æœåŠ¡çš„ï¼Œæˆ‘ä»¬éœ€è¦åœ¨åœ°å€æ é‡ŒåŠ å‰ç¼€: httpsã€‚æ³¨æ„:ç”±äºé»˜è®¤é…ç½®ä½¿ç”¨çš„æ˜¯è‡ªç­¾åè¯ä¹¦ï¼Œæ‰€ä»¥æœ‰çš„æµè§ˆå™¨ä¼šå‘Šè¯‰ä½ æ˜¯ä¸å®‰å…¨çš„ï¼Œä½†æˆ‘ä»¬ä¾ç„¶å¯ä»¥ç»§ç»­è®¿é—®å®ƒã€‚å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥æä¾›è‡ªå·±çš„è¯ä¹¦â€•â€•å¦‚æœæœ‰çš„è¯:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">https</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cacert</span><span class="token operator">:</span> <span class="token string">&#39;./server.pem&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">pfx</span> <span class="token operator">:</span> <span class="token string">&#39;./server.pfx &#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">key</span> <span class="token operator">:</span> <span class="token string">&#39;./ server.key &#39;</span> <span class="token punctuation">,</span>
    <span class="token literal-property property">cert</span><span class="token operator">:</span> <span class="token string">&#39;./server.crt &#39;</span> <span class="token punctuation">,</span>
    <span class="token literal-property property">passphrase</span><span class="token operator">:</span> <span class="token string">&#39;webpack-dev-server &#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">requestCert</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="http2" tabindex="-1"><a class="header-anchor" href="#http2" aria-hidden="true">#</a> http2</h4><p>http2æ˜¯è‡ªå¸¦httpsçš„è‡ªç­¾åè¯ä¹¦çš„</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>devServer: {
    http2: true,
  },
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="historyapifallback" tabindex="-1"><a class="header-anchor" href="#historyapifallback" aria-hidden="true">#</a> historyApiFallback</h4><p>å¦‚æœæˆ‘ä»¬çš„åº”ç”¨æ˜¯ä¸ªSPA(å•é¡µé¢åº”ç”¨)ï¼Œå½“è·¯ç”±åˆ°/someæ—¶(å¯ä»¥ç›´æ¥åœ¨åœ°å€æ é‡Œè¾“å…¥)ï¼Œä¼šå‘ç°æ­¤æ—¶åˆ·æ–°é¡µé¢åï¼Œæ§åˆ¶å°ä¼šæŠ¥é”™ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>GET http://localhost:3000/some 404 (Not Found)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ­¤æ—¶æ‰“å¼€networkï¼Œåˆ·æ–°å¹¶æŸ¥çœ‹ï¼Œå°±ä¼šå‘ç°é—®é¢˜æ‰€åœ¨-â€”â€•æµè§ˆå™¨æŠŠè¿™ä¸ªè·¯ç”±å½“ä½œäº†é™æ€èµ„æºåœ°å€å»è¯·æ±‚ã€‚æ­¤æ—¶å¹¶æ²¡æœ‰æ‰“åŒ…å‡º/someè¿™æ ·çš„èµ„æºï¼Œæ‰€ä»¥è¿™ä¸ªè®¿é—®æ— ç–‘æ˜¯404çš„ã€‚<strong>æ­¤æ—¶å¯ä»¥é€šè¿‡é…ç½®æ¥æä¾›é¡µé¢ä»£æ›¿ä»»ä½•404çš„é™æ€èµ„æºå“åº”:</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// æ­¤æ—¶å®é™…ä¸Šæ˜¯è·³åˆ°äº†æ ¹é¡µé¢ä¸‹</span>
<span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">historyApiFallback</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ­¤æ—¶é‡å¯æœåŠ¡åˆ·æ–°åå‘ç°è¯·æ±‚å˜æˆäº†index.htmlã€‚å½“ç„¶ï¼Œåœ¨å¤šæ•°ä¸šåŠ¡åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®ä¸åŒçš„è®¿é—®è·¯å¾„å®šåˆ¶æ›¿ä»£çš„é¡µé¢ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨rewritesè¿™ä¸ªé…ç½®é¡¹ã€‚ç±»ä¼¼è¿™æ ·:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">devServer</span><span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token literal-property property">historyApiFallback</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">rewrites</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span><span class="token literal-property property">from</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\/$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span><span class="token literal-property property">to</span><span class="token operator">:</span> <span class="token string">&#39;/views/landing.html/&#39;</span><span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å¼€å‘æœåŠ¡å™¨ä¸»æœº" tabindex="-1"><a class="header-anchor" href="#å¼€å‘æœåŠ¡å™¨ä¸»æœº" aria-hidden="true">#</a> å¼€å‘æœåŠ¡å™¨ä¸»æœº</h4><p>å¦‚æœä½ åœ¨å¼€å‘ç¯å¢ƒä¸­èµ·äº†ä¸€ä¸ªdevserveæœåŠ¡ï¼Œå¹¶æœŸæœ›ä½ çš„åŒäº‹èƒ½è®¿é—®åˆ°å®ƒï¼Œä½ åªéœ€è¦é…ç½®:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">devServer</span><span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">&#39;0.0.0.0&#39;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-3-æ¨¡å—çƒ­æ›¿æ¢ä¸çƒ­åŠ è½½" tabindex="-1"><a class="header-anchor" href="#_1-3-æ¨¡å—çƒ­æ›¿æ¢ä¸çƒ­åŠ è½½" aria-hidden="true">#</a> 1.3 æ¨¡å—çƒ­æ›¿æ¢ä¸çƒ­åŠ è½½</h3><h4 id="æ¨¡å—çƒ­æ›¿æ¢" tabindex="-1"><a class="header-anchor" href="#æ¨¡å—çƒ­æ›¿æ¢" aria-hidden="true">#</a> æ¨¡å—çƒ­æ›¿æ¢</h4><p><strong>æ¨¡å—çƒ­æ›¿æ¢ä¼šåœ¨åº”ç”¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œæ›¿æ¢ã€æ·»åŠ æˆ–åˆ é™¤æ¨¡å—ï¼Œè€Œæ— éœ€é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢ã€‚</strong></p><p>å¯åŠ¨webpackçš„çƒ­æ¨¡å—æ›¿æ¢ç‰¹æ€§ï¼Œéœ€è¦é…ç½®devServer.hotå‚æ•°</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">hot</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>cssæ–‡ä»¶å¯ä»¥ç›´æ¥å®ç°çƒ­æ›¿æ¢</strong>ï¼Œå¦‚æœä½ é…ç½®äº†style-loaderï¼Œé‚£ä¹ˆç°åœ¨å·²ç»åŒæ ·æ”¯æŒæ ·å¼æ–‡ä»¶çš„çƒ­æ›¿æ¢åŠŸèƒ½äº†ã€‚è¿™æ˜¯å› ä¸ºstyle-loaderçš„å®ç°ä½¿ç”¨äº†module.hot.acceptï¼Œåœ¨cssä¾èµ–æ¨¡å—æ›´æ–°ä¹‹åï¼Œä¼šå¯¹styleæ ‡ç­¾æ‰“è¡¥ä¸ã€‚ä»è€Œå®ç°äº†è¿™ä¸ªåŠŸèƒ½ã€‚</p><p><strong>jsæ–‡ä»¶éœ€è¦åŠ ä¸Šä»¥ä¸‹ï¼Œæ‰èƒ½å®ç°çƒ­æ›¿æ¢</strong>ã€‚webpack5å®ç°çƒ­æ›¿æ¢ï¼Œå®é™…ä½¿ç”¨çš„æ˜¯webpack5å¼€ç®±å³ç”¨çš„HotModuleReplacementPluginï¼Œåªéœ€è¦é…ç½®devServer.hotå³å¯ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>module<span class="token punctuation">.</span>hot<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// æ¥å—ä¸€ä¸ªæ–‡ä»¶ï¼Œå½“å®ƒå˜åŒ–æ—¶çƒ­æ›¿æ¢ï¼Œå›è°ƒå‡½æ•°åœ¨çƒ­æ›¿æ¢æ—¶æ‰§è¡Œ</span>
  module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token string">&quot;./input.js&quot;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># æµè§ˆå™¨ä¸­</span>
<span class="token punctuation">[</span>webpack<span class="token operator">-</span>dev<span class="token operator">-</span>server<span class="token punctuation">]</span> Server started<span class="token punctuation">:</span> Hot Module Replacement enabled<span class="token punctuation">,</span> Live Reloading enabled<span class="token punctuation">,</span> Progress disabled<span class="token punctuation">,</span> Overlay enabled<span class="token punctuation">.</span>
<span class="token punctuation">[</span>webpack<span class="token operator">-</span>dev<span class="token operator">-</span>server<span class="token punctuation">]</span> App updated<span class="token punctuation">.</span> Recompiling<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">[</span>webpack<span class="token operator">-</span>dev<span class="token operator">-</span>server<span class="token punctuation">]</span> App hot update<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">[</span>HMR<span class="token punctuation">]</span> Checking <span class="token keyword">for</span> updates on the server<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">[</span>HMR<span class="token punctuation">]</span> Updated modules<span class="token punctuation">:</span>
<span class="token punctuation">[</span>HMR<span class="token punctuation">]</span>  <span class="token operator">-</span> <span class="token punctuation">.</span><span class="token operator">/</span><span class="token builtin">input</span><span class="token punctuation">.</span>js
<span class="token punctuation">[</span>HMR<span class="token punctuation">]</span> App <span class="token keyword">is</span> up to date<span class="token punctuation">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="æ¨¡å—çƒ­åŠ è½½" tabindex="-1"><a class="header-anchor" href="#æ¨¡å—çƒ­åŠ è½½" aria-hidden="true">#</a> æ¨¡å—çƒ­åŠ è½½</h4><p><strong>çƒ­åŠ è½½ï¼ˆæ–‡ä»¶æ›´æ–°æ—¶ï¼Œè‡ªåŠ¨åˆ·æ–°æˆ‘ä»¬çš„æœåŠ¡å’Œé¡µé¢ï¼‰æ–°ç‰ˆçš„webpack-dev-serveré»˜è®¤å·²ç»å¼€å¯äº†çƒ­åŠ è½½çš„åŠŸèƒ½ã€‚å®ƒå¯¹åº”çš„å‚æ•°æ˜¯devServer.liveReloadï¼Œé»˜è®¤ä¸ºtrueã€‚æ³¨æ„ï¼Œå¦‚æœæƒ³è¦å…³æ‰å®ƒï¼Œè¦å°†liveReloadè®¾ç½®ä¸ºfalseçš„åŒæ—¶ï¼Œä¹Ÿè¦å…³é—­hot</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">liveReload</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// é»˜è®¤ä¸ºtrueï¼Œå³å¼€å¯çƒ­æ›´æ–°åŠŸèƒ½</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-4-eslint" tabindex="-1"><a class="header-anchor" href="#_1-4-eslint" aria-hidden="true">#</a> 1.4 ESLint</h3><h4 id="å•ç‹¬ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#å•ç‹¬ä½¿ç”¨" aria-hidden="true">#</a> å•ç‹¬ä½¿ç”¨</h4><p>eslintæ˜¯ç”¨æ¥æ‰«ææˆ‘ä»¬æ‰€å†™çš„ä»£ç æ˜¯å¦ç¬¦åˆè§„èŒƒçš„å·¥å…·ã€‚ä¸¥æ ¼æ„ä¹‰ä¸Šæ¥è¯´, eslinté…ç½®è·Ÿwebpackæ— å…³ï¼Œä½†åœ¨å·¥ç¨‹åŒ–å¼€å‘ç¯å¢ƒä¸­ï¼Œå®ƒå¾€å¾€æ˜¯ä¸å¯æˆ–ç¼ºçš„ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm install eslint  @eslint/create-config -D
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>é…ç½®eslintï¼Œåªéœ€è¦åœ¨æ ¹ç›®å½•ä¸‹æ·»åŠ ä¸€ä¸ª.<strong>eslintrc</strong>æ–‡ä»¶(æˆ–è€….eslintrc.json,.jsç­‰)ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨eslintå·¥å…·æ¥è‡ªåŠ¨ç”Ÿæˆå®ƒ:</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>npx eslint <span class="token operator">-</span><span class="token operator">-</span>init
<span class="token comment"># æˆ–</span>
npm init @eslint<span class="token operator">/</span>config
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;env&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;browser&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">&quot;es2021&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;extends&quot;</span><span class="token operator">:</span> <span class="token string">&quot;airbnb-base&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;overrides&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;parserOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;ecmaVersion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;latest&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;sourceType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;rules&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¹¶ç”Ÿæˆäº†ä¸€ä¸ªé…ç½®æ–‡ä»¶(.eslintrc.json)ï¼Œè¿™æ ·æˆ‘ä»¬å°±å®Œæˆäº†eslintçš„åŸºæœ¬è§„åˆ™é…ç½®ã€‚eslinté…ç½®æ–‡ä»¶é‡Œçš„é…ç½®é¡¹å«ä¹‰å¦‚ä¸‹:</p><ol><li><p><strong>env</strong>ï¼šæŒ‡å®šè„šæœ¬çš„è¿è¡Œç¯å¢ƒã€‚æ¯ç§ç¯å¢ƒéƒ½æœ‰ä¸€ç»„ç‰¹å®šçš„é¢„å®šä¹‰å…¨å±€å˜é‡ã€‚æ­¤å¤„ä½¿ç”¨çš„ browseré¢„å®šä¹‰äº†æµè§ˆå™¨ ç¯å¢ƒä¸­çš„å…¨å±€å˜é‡ï¼Œes6å¯ç”¨é™¤äº†modules ä»¥å¤–çš„æ‰€æœ‰ECMAScript 6ç‰¹æ€§ï¼ˆè¯¥é€‰é¡¹ä¼šè‡ªåŠ¨è®¾ç½®ecmaVersionè§£æå™¨é€‰é¡¹ä¸º6)ã€‚</p></li><li><p><strong>globals</strong>ï¼šè„šæœ¬åœ¨æ‰§è¡ŒæœŸé—´è®¿é—®çš„é¢å¤–çš„å…¨å±€å˜é‡ã€‚ä¹Ÿå°±æ˜¯envç¯å¢ƒä¸­ä¸­æœªé¢„å®šä¹‰ï¼Œä½†æˆ‘ä»¬åˆéœ€è¦ä½¿ç”¨çš„å…¨å±€å˜é‡</p></li><li><p><strong>extends</strong>ï¼šæ‰©å±•ï¼Œæ£€æµ‹ä¸­ä½¿ç”¨çš„é¢„å®šä¹‰çš„è§„åˆ™é›†åˆã€‚</p></li><li><p><strong>rules</strong>ï¼š å¯ç”¨çš„è§„åˆ™åŠå…¶å„è‡ªçš„é”™è¯¯çº§åˆ«ï¼Œä¼šåˆå¹¶extendsä¸­çš„åŒåè§„åˆ™ï¼Œå®šä¹‰å†²çªæ—¶ä¼˜å…ˆçº§æ›´é«˜ã€‚</p></li><li><p><strong>parserOotions</strong>ï¼šESLintå…è®¸ä½ æŒ‡å®šä½ æƒ³è¦æ”¯æŒçš„JavaScript è¯­è¨€é€‰é¡¹ã€‚</p><p><strong>ecmaFeatures æ˜¯ä¸ªå¯¹è±¡ï¼Œè¡¨ç¤ºä½ æƒ³ä½¿ç”¨çš„é¢å¤–çš„è¯­è¨€ç‰¹æ€§ï¼Œè¿™é‡Œ jsxä»£è¡¨å¯ç”¨JSX</strong>ã€‚</p><p><strong>ecmaVersionç”¨æ¥æŒ‡å®šæ”¯æŒçš„ECMAScriptç‰ˆæœ¬</strong>ã€‚é»˜è®¤ä¸º5ï¼Œå³ä»…æ”¯æŒes5ï¼Œä½ å¯ä»¥ä½¿ç”¨6ã€7ã€8ã€9æˆ–10æ¥æŒ‡å®šä½ æƒ³è¦ä½¿ç”¨çš„ECMAScript ç‰ˆæœ¬ã€‚ä½ ä¹Ÿå¯ä»¥ç”¨ä½¿ç”¨å¹´ä»½å‘½åçš„ç‰ˆæœ¬å·æŒ‡å®šä¸º2015(åŒ6) ï¼Œ2016(åŒ7)ï¼Œæˆ–2017(åŒ8)æˆ–2018(åŒ9)æˆ–2019(same as 10)ã€‚ä¸Šé¢çš„envä¸­å¯ç”¨äº†es6ï¼Œè‡ªåŠ¨è®¾ç½®äº†ecmaVersionè§£æå™¨é€‰é¡¹ä¸º6ã€‚</p><p><strong>plugins</strong>ï¼šæ˜¯ä¸€ä¸ªnpmåŒ…ï¼Œé€šå¸¸è¾“å‡ºeslint å†…éƒ¨æœªå®šä¹‰çš„è§„åˆ™å®ç°ã€‚ruleså’Œextendsä¸­å®šä¹‰çš„è§„åˆ™ï¼Œå¹¶ä¸éƒ½åœ¨eslintå†…éƒ¨ä¸­æœ‰å®ç°ã€‚æ¯”å¦‚ extendsä¸­çš„plugin:react/recommendedï¼Œå…¶ä¸­å®šä¹‰äº†è§„åˆ™å¼€å…³å’Œç­‰çº§ï¼Œä½†æ˜¯è¿™äº›è§„åˆ™å¦‚ä½•ç”Ÿæ•ˆçš„é€»è¾‘æ˜¯åœ¨å…¶å¯¹åº”çš„ä»¶â€˜react&#39;ä¸­å®ç°çš„ã€‚</p></li></ol><p>æ£€æŸ¥æ–‡ä»¶æ˜¯å¦æœ‰é”™è¯¯</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npx eslint ./src/app.js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="é…åˆwebpack" tabindex="-1"><a class="header-anchor" href="#é…åˆwebpack" aria-hidden="true">#</a> é…åˆwebpack</h4><p>ç»“åˆwebpackçš„æ‰“åŒ…ç¼–è¯‘åŠŸèƒ½ï¼Œå¯ä»¥å®ç°eslintå®æ—¶æç¤ºæŠ¥é”™è€Œä¸å¿…ç­‰å¾…å‘½ä»¤è¡Œæ‰§è¡Œå‘½ä»¤ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm i eslint-webpack-plugin -D
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;html-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ESLintPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;eslint-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&quot;development&quot;</span><span class="token punctuation">,</span>

  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&quot;./src/app.js&quot;</span><span class="token punctuation">,</span>

  <span class="token literal-property property">plugin</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ESLintPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-5-git-hooksä¸husky" tabindex="-1"><a class="header-anchor" href="#_1-5-git-hooksä¸husky" aria-hidden="true">#</a> 1.5 git-hooksä¸husky</h3><h4 id="git-hooks" tabindex="-1"><a class="header-anchor" href="#git-hooks" aria-hidden="true">#</a> git-hooks</h4><p>ä¸ºäº†ä¿è¯æäº¤çš„ä»£ç ç¬¦åˆè§„èŒƒï¼Œå¯ä»¥åœ¨ä¸Šä¼ ä»£ç æ—¶è¿›è¡Œæ ¡éªŒã€‚å¸¸ç”¨huskyæ¥ååŠ©è¿›è¡Œä»£ç æäº¤æ—¶çš„eslintæ ¡éªŒã€‚åœ¨ä½¿ç”¨huskyä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥ç ”ç©¶ä¸€ä¸‹git-hooksã€‚</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token punctuation">(</span>base<span class="token punctuation">)</span> D<span class="token punctuation">:</span>\vscode\WebpackDemo\part<span class="token operator">-</span><span class="token number">2</span>\<span class="token number">01</span><span class="token operator">-</span>dev<span class="token operator">-</span>config\<span class="token number">04</span><span class="token operator">-</span>esllint<span class="token operator">&gt;</span>cd <span class="token punctuation">.</span>git

<span class="token punctuation">(</span>base<span class="token punctuation">)</span> D<span class="token punctuation">:</span>\vscode\WebpackDemo\part<span class="token operator">-</span><span class="token number">2</span>\<span class="token number">01</span><span class="token operator">-</span>dev<span class="token operator">-</span>config\<span class="token number">04</span><span class="token operator">-</span>esllint\<span class="token punctuation">.</span>git<span class="token operator">&gt;</span>cd hooks

<span class="token punctuation">(</span>base<span class="token punctuation">)</span> D<span class="token punctuation">:</span>\vscode\WebpackDemo\part<span class="token operator">-</span><span class="token number">2</span>\<span class="token number">01</span><span class="token operator">-</span>dev<span class="token operator">-</span>config\<span class="token number">04</span><span class="token operator">-</span>esllint\<span class="token punctuation">.</span>git\hooks<span class="token operator">&gt;</span> touch pre<span class="token operator">-</span>commit

vim pre<span class="token operator">-</span>commit
npx eslint <span class="token punctuation">.</span><span class="token operator">/</span>src
<span class="token comment"># é…ç½®è‡ªå®šä¹‰çš„git-hooks</span>
git config core<span class="token punctuation">.</span>hooksPath <span class="token punctuation">.</span>mygithooks
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="husky" tabindex="-1"><a class="header-anchor" href="#husky" aria-hidden="true">#</a> husky</h4><blockquote><p>Modern native Git hooks made easy</p></blockquote><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// ç¬¬ä¸€æ­¥ï¼šå®‰è£…</span>
npm i husky <span class="token operator">-</span><span class="token constant">D</span>

<span class="token comment">// ç¬¬äºŒæ­¥ enable git-hook</span>
px husky install
husky <span class="token operator">-</span> Git hooks installed

<span class="token comment">// ç¬¬ä¸‰æ­¥ï¼šé…ç½®è„šæœ¬</span>
<span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;prepare&quot;</span><span class="token operator">:</span> <span class="token string">&quot;husky install&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token comment">// åˆ›å»ºhook</span>
npx husky add <span class="token punctuation">.</span>husky<span class="token operator">/</span>pre<span class="token operator">-</span>commit <span class="token string">&quot;npm test&quot;</span>
git add <span class="token punctuation">.</span>husky<span class="token operator">/</span>pre<span class="token operator">-</span>commit
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-æ¨¡å—ä¸ä¾èµ–" tabindex="-1"><a class="header-anchor" href="#_2-æ¨¡å—ä¸ä¾èµ–" aria-hidden="true">#</a> 2. æ¨¡å—ä¸ä¾èµ–</h2><h3 id="_2-1-æ¨¡å—è§£æ-resolve" tabindex="-1"><a class="header-anchor" href="#_2-1-æ¨¡å—è§£æ-resolve" aria-hidden="true">#</a> 2.1 æ¨¡å—è§£æ(resolve)</h3><p>webpacké€šè¿‡<strong>Resolverså®ç°äº†æ¨¡å—ä¹‹é—´çš„ä¾èµ–å’Œå¼•ç”¨</strong>ã€‚</p><p>æ‰€å¼•ç”¨çš„æ¨¡å—å¯ä»¥æ˜¯æ¥è‡ªåº”ç”¨ç¨‹åºçš„ä»£ç ï¼Œä¹Ÿå¯ä»¥æ˜¯ç¬¬ä¸‰æ–¹åº“ã€‚<strong>resolverå¸®åŠ©webpack ä»æ¯ä¸ªrequire/import è¯­å¥ä¸­ï¼Œä¸­ï¼Œæ‰¾åˆ°éœ€è¦å¼•å…¥åˆ° bundle ä¸­çš„æ¨¡å—ä»£ç ã€‚å½“æ‰“åŒ…æ¨¡å—æ—¶, webpackä½¿ç”¨enhanced-resolveæ¥è§£ææ–‡ä»¶è·¯å¾„ï¼ˆwebpack_resolverçš„ä»£ç å®ç°å¾ˆæœ‰æ€æƒ³, webpackåŸºäºæ­¤è¿›è¡Œtreeshakingï¼‰</strong></p><h4 id="æ¨¡å—è·¯å¾„è§£æè§„åˆ™" tabindex="-1"><a class="header-anchor" href="#æ¨¡å—è·¯å¾„è§£æè§„åˆ™" aria-hidden="true">#</a> æ¨¡å—è·¯å¾„è§£æè§„åˆ™</h4><p>é€šè¿‡å†…ç½®çš„enhanced-resolveï¼Œwebpack èƒ½è§£æä¸‰ç§æ–‡ä»¶è·¯å¾„:</p><ul><li><strong>ç»å¯¹è·¯å¾„</strong>ï¼šç”±äºå·²ç»è·å¾—æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ï¼Œå› æ­¤ä¸éœ€è¦å†åšè¿›ä¸€æ­¥è§£æã€‚</li><li><strong>ç›¸å¯¹è·¯å¾„</strong>ï¼šè¿™ç§æƒ…å†µä¸‹ï¼Œä½¿ç”¨ importæˆ– requireçš„èµ„æºæ–‡ä»¶æ‰€å¤„çš„ç›®å½•ï¼Œè¢«è®¤ä¸ºæ˜¯ä¸Šä¸‹æ–‡ç›®å½•ã€‚<strong>åœ¨import/requireä¸­ç»™å®šçš„ç›¸å¯¹è·¯å¾„ï¼Œenhanced-resolveä¼šæ‹¼æ¥æ­¤ä¸Šä¸‹æ–‡è·¯å¾„ï¼Œæ¥ç”Ÿæˆæ¨¡å—çš„ç»å¯¹è·¯å¾„(path.resolve(_dirname, RelativePath</strong>ï¼‰</li><li><strong>æ¨¡å—è·¯å¾„</strong>ï¼šå³node_modulesè·¯å¾„ï¼Œåœ¨node_modulesä¸­å¯»æ‰¾</li></ul><p>å¯ä»¥ç»™æŸä¸ªæ–‡ä»¶çš„è·¯å¾„èµ·ä¸ªåˆ«å</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// æ­¤å@å°±æŒ‡å‘äº†src</span>
<span class="token literal-property property">resolve</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;@&quot;</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;./src&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è‡ªå®šä¹‰åŒåæ–‡ä»¶ä¼˜å…ˆåŠ è½½é¡ºåº</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// æŒ‰æ•°ç»„å®šä¹‰é¡ºåºåŠ è½½</span>
<span class="token literal-property property">extensions</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;.json&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.js&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-2-å¤–éƒ¨æ‰©å±•" tabindex="-1"><a class="header-anchor" href="#_2-2-å¤–éƒ¨æ‰©å±•" aria-hidden="true">#</a> 2.2 å¤–éƒ¨æ‰©å±•</h3><p>æœ‰æ—¶å€™æˆ‘ä»¬ä¸ºäº†å‡å°bundleçš„ä½“ç§¯ï¼Œä»è€ŒæŠŠä¸€äº›ä¸å˜çš„ç¬¬ä¸‰æ–¹åº“ç”¨cdnçš„å½¢å¼å¼•å…¥è¿›æ¥ï¼Œæ¯”å¦‚jQueryã€‚</p><p>webpack ä¸ºæ­¤æä¾›äº†externalsçš„é…ç½®å±æ€§ï¼Œå¯ä»¥é…ç½®å¤–éƒ¨æ‰©å±•æ¨¡å—ã€‚</p><ul><li><p>æ‰‹åŠ¨å¼•å…¥</p><p>éœ€è¦æ‰‹åŠ¨åœ¨htmlä¸­æ·»åŠ å¯¹åº”çš„cdné“¾æ¥scriptæ ‡ç­¾ï¼Œç„¶ååœ¨webpack.config.jsä¸­æ·»åŠ externalså±æ€§</p></li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>  <span class="token literal-property property">externals</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// key: ä¸å¼•ç”¨çš„åŒ…åä¸€è‡´</span>
    <span class="token comment">// value: scriptæ ‡ç­¾åŠ è½½çš„å¯¹è±¡æ‰€æš´éœ²å‡ºæ¥çš„å€¼</span>
    <span class="token literal-property property">jquery</span><span class="token operator">:</span> <span class="token string">&quot;jQuery&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token comment">// app.js</span>
<span class="token keyword">import</span> $ <span class="token keyword">from</span> <span class="token string">&quot;jquery&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>$<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// index.html</span>
 <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;https://cdn.bootcdn.net/ajax/libs/jquery/3.6.3/jquery.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>webpackè‡ªåŠ¨å¼•å…¥</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// å®šä¹‰å¤–éƒ¨èµ„æºå¼•å…¥çš„å½¢å¼</span>
  <span class="token literal-property property">externalsType</span><span class="token operator">:</span> <span class="token string">&quot;script&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">externals</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// key: ä¸å¼•ç”¨çš„åŒ…åä¸€è‡´</span>
    <span class="token comment">// value: scriptæ ‡ç­¾åŠ è½½çš„cdnå¯¹è±¡æ‰€æš´éœ²å‡ºæ¥çš„å€¼</span>
    <span class="token literal-property property">jquery</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;https://cdn.bootcdn.net/ajax/libs/jquery/3.6.3/jquery.js&quot;</span><span class="token punctuation">,</span>
      <span class="token comment">// ç¬¬äºŒä¸ªå‚æ•°ä¸ºæš´éœ²çš„å¯¹è±¡å</span>
      <span class="token string">&quot;jQuery&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-3-ä¾èµ–å›¾" tabindex="-1"><a class="header-anchor" href="#_2-3-ä¾èµ–å›¾" aria-hidden="true">#</a> 2.3 ä¾èµ–å›¾</h3><p>æ¯å½“ä¸€ä¸ªæ–‡ä»¶ä¾èµ–å¦ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œwebpackä¼šç›´æ¥å°†æ–‡ä»¶è§†ä¸ºä¾èµ–å…³ç³»ã€‚è¿™ä½¿å¾—webpackå¯ä»¥è·å–éä»£ç èµ„æºï¼Œå¦‚imagesï¼Œfontsç­‰ï¼Œå¹¶ä¼šå®ƒä»¬ä½œä¸ºä¾èµ–æä¾›ç»™åº”ç”¨ç¨‹åºã€‚å½“webpackå¼€å§‹å·¥ä½œæ—¶ï¼Œå®ƒä¼šæ ¹æ®é…ç½®ï¼Œä»å…¥å£entryå¼€å§‹ï¼Œwebpackä¼šé€’å½’åœ°æ„å»ºä¸€ä¸ªä¾èµ–å…³ç³»å›¾ã€‚è¿™ä¸ªä¾èµ–å›¾åŒ…å«ç€åº”ç”¨ç¨‹åºçš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åå°†æ‰€æœ‰æ¨¡å—æ‰“åŒ…ä¸ºbundleï¼ˆä¹Ÿå°±æ˜¯outputçš„é…ç½®é¡¹ï¼‰</p><p>bundleåˆ†æå·¥å…·ï¼Œå¯è§†åŒ–æ‰“åŒ…äº§ç‰©çš„ä¾èµ–å›¾</p><p>webpack-bundle-analyzerï¼šä¸€ä¸ªpluginå’ŒCLIå·¥å…·ï¼Œå®ƒå°†bundle å†…å®¹å±•ç¤ºä¸ºä¸€ä¸ªä¾¿æ·çš„ã€äº¤äº’å¼ã€å¯ç¼©æ”¾çš„æ ‘çŠ¶å›¾å½¢å¼</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm i webpack-bundle-analyzer -D
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> BundleAnalyzerPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack-bundle-analyzer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BundleAnalyzerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-æ‰©å±•åŠŸèƒ½" tabindex="-1"><a class="header-anchor" href="#_3-æ‰©å±•åŠŸèƒ½" aria-hidden="true">#</a> 3. æ‰©å±•åŠŸèƒ½</h2><h3 id="_3-1-postcssä¸cssæ¨¡å—" tabindex="-1"><a class="header-anchor" href="#_3-1-postcssä¸cssæ¨¡å—" aria-hidden="true">#</a> 3.1 postCSSä¸CSSæ¨¡å—</h3><p>PostCSSæ˜¯ä¸€ä¸ªç”¨JavaScript å·¥å…·å’Œæ’ä»¶è½¬æ¢CSSä»£ç çš„å·¥å…·ã€‚æ¯”å¦‚å¯ä»¥ä½¿ç”¨ Autoprefixeræ’ä»¶è‡ªåŠ¨è·å–æµè§ˆå™¨çš„æµè¡Œåº¦å’Œèƒ½å¤Ÿæ”¯æŒçš„å±æ€§ï¼Œå¹¶æ ¹æ®è¿™äº›æ•°æ®å¸®æˆ‘ä»¬è‡ªåŠ¨çš„ä¸ºCSSè§„åˆ™æ·»åŠ å‰ç¼€ï¼Œå°†æœ€æ–°çš„CSSè¯­æ³•è½¬æ¢ä¸ºå¤§å¤šæ•°æµè§ˆå™¨éƒ½èƒ½ç†è§£çš„è¯­æ³•ã€‚</p><h4 id="postcss" tabindex="-1"><a class="header-anchor" href="#postcss" aria-hidden="true">#</a> postCSS</h4><p>PosetCSS ä¸ Webpack ç»“åˆï¼Œéœ€è¦å®‰è£… style-loader , css-loader , postcss-loader ä¸‰ä¸ªloaderï¼š</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># autoprefixer å¯ä»¥åŠ è½½ä¸€äº›æ ·å¼çš„å‰ç¼€</span>
<span class="token comment"># postcss-nested å¯ä»¥å†™ä¸€äº›åµŒå¥—æ ·å¼</span>
npm i style<span class="token operator">-</span>loader css<span class="token operator">-</span>loader postcss<span class="token operator">-</span>loader autoprefixer postcss<span class="token operator">-</span>nested <span class="token operator">-</span>D
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>åœ¨postcss.config.jsä¸­é…ç½®ç›¸å…³çš„cssæ’ä»¶</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>module.exports = {
  plugins: [require(&quot;autoprefixer&quot;)],
};
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>package.jsonä¸­çº¦å®šæµè§ˆå™¨ç‰ˆæœ¬ï¼š</strong></p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>  <span class="token comment">// å…¨çƒæµè§ˆå™¨çš„ä½¿ç”¨ç‡å¤§äº1%ï¼Œæµè§ˆå™¨æœ€è¿‘çš„ä¸¤ä¸ªç‰ˆæœ¬</span>
  <span class="token property">&quot;broeserslist&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;&gt; 1%&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;last 2 versions&quot;</span>
  <span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="cssæ¨¡å—" tabindex="-1"><a class="header-anchor" href="#cssæ¨¡å—" aria-hidden="true">#</a> cssæ¨¡å—</h4><p>è§£å†³csså‘½åå†²çª</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js</span>
<span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token comment">// å¼€å¯cssæ¨¡å—</span>
              <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">&quot;postcss-loader&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token string">&quot;./app.css&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;box&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¤æ—¶ï¼Œä¼šå°†ç±»åç”Ÿæˆä¸ºä¸€ä¸ªå”¯ä¸€çš„å“ˆå¸Œå€¼å»å”¯ä¸€æ ‡è¯†ç±»åï¼Œè€Œå…ƒç´ ä¸­çš„ç±»åè¿˜æ˜¯åŸå§‹å®šä¹‰çš„ç±»åï¼Œå¯¼è‡´æ ·å¼æ— æ³•ç”Ÿæ•ˆã€‚</strong></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> -webkit-box<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> -ms-flexbox<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

   <span class="token selector">body .jiiwoQM4RBXA8T7kGVrB</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> yellow<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰€ä»¥éœ€è¦å°†cssä½œä¸ºæ¨¡å—å¯¼å…¥ï¼Œæ¥ä¿è¯</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">&quot;./app.css&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>styles<span class="token punctuation">.</span>box<span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="éƒ¨åˆ†å¼€å¯cssæ¨¡å—" tabindex="-1"><a class="header-anchor" href="#éƒ¨åˆ†å¼€å¯cssæ¨¡å—" aria-hidden="true">#</a> éƒ¨åˆ†å¼€å¯cssæ¨¡å—</h4><p>å…¨å±€æ ·å¼å¯ä»¥ä½¿ç”¨ .globalå‰ç¼€ï¼Œå¦‚ï¼š</p><ul><li>*.global.cssæ™®é€šæ¨¡å—ï¼Œç›´æ¥å¼•å…¥æ–‡ä»¶å³å¯ä½¿ç”¨</li><li>*.css css module æ¨¡å¼ï¼Œéœ€è¦æŒ‰æ¨¡å—å¯¼å…¥import styles from &quot;./app.css&quot;</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// CSS module</span>
<span class="token punctuation">{</span>
        <span class="token comment">// ä¸å¸¦globalçš„cssæ–‡ä»¶</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">^(?!.*\\.global).*\\.css</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token comment">// å…è®¸é…ç½®ç”Ÿæˆçš„æœ¬åœ°æ ‡è¯†ç¬¦(ident),å¼€å‘ç¯å¢ƒä½¿ç”¨ &#39;[path][name]__[local]&#39;,ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ &#39;[hash:base64]&#39;</span>
                <span class="token comment">// [local] å ä½ç¬¦åŒ…å«åŸå§‹çš„ç±»ã€‚</span>
                <span class="token literal-property property">localIdentName</span><span class="token operator">:</span> <span class="token string">&quot;[hash:base64:6]&quot;</span><span class="token punctuation">,</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">&quot;postcss-loader&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token punctuation">[</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;node_modules&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// æ™®é€šæ¨¡å¼</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">^(.*\\.global).*\\.css</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;postcss-loader&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token punctuation">[</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;node_modules&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>app.global.css</p><div class="language-css line-numbers-mode" data-ext="css"><pre class="language-css"><code><span class="token selector">.word</span> <span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>app.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">&quot;./app.css&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;./app.global.css&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>styles<span class="token punctuation">.</span>box<span class="token punctuation">)</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;word&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-2-web-works" tabindex="-1"><a class="header-anchor" href="#_3-2-web-works" aria-hidden="true">#</a> 3.2 web works</h3><p>**web worksæä¾›äº†åå°å¤„ç†çº¿ç¨‹çš„APIï¼Œå¯ä»¥ç”¨æ¥å®Œæˆå¤æ‚è€—æ—¶çš„å·¥ä½œï¼ŒæŠŠå®ƒåå°å¤„ç†ï¼Œè®©jsçº¿ç¨‹ä¸é˜»å¡UIçº¿ç¨‹çš„æ¸²æŸ“ï¼Œé¿å…æµè§ˆå™¨è¢«é˜»å¡ã€‚**webpack5å†…ç½®äº†æ‰“åŒ…work.jsçš„åŠŸèƒ½ï¼Œä¼šæ‰“åŒ…å‡ºâ€œsrc_work_js.js&quot;çš„æ–‡ä»¶</p><p>work.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// æ¥å—ä¸»çº¿ç¨‹å‘é€çš„ä¿¡æ¯</span>
self<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">message</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  self<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">answer</span><span class="token operator">:</span> <span class="token number">1111</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>app.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">&quot;./work.js&quot;</span><span class="token punctuation">,</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">question</span><span class="token operator">:</span> <span class="token string">&quot;lucky number?&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

worker<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">message</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span>data<span class="token punctuation">.</span>answer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-3-typescript" tabindex="-1"><a class="header-anchor" href="#_3-3-typescript" aria-hidden="true">#</a> 3.3 TypeScript</h3><p>webpackå·¥ç¨‹åŒ–ç¯å¢ƒä¸­ç»§æ‰¿TS</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm i typescript ts-loader @types/lodash -D
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ·»åŠ ä¸€ä¸ªtsçš„é…ç½®æ–‡ä»¶---â€”-tsconfig.jsonï¼Œæˆ‘ä»¬å¯ä»¥ç”¨tsè‡ªå¸¦çš„å·¥å…·æ¥è‡ªåŠ¨åŒ–ç”Ÿæˆå®ƒ</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npx tsc -init
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç”Ÿæˆäº†ä¸€ä¸ªtsconfig.jsonï¼Œé‡Œé¢æ³¨é‡Šæ‰äº†ç»å¤§å¤šæ•°é…ç½®</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token property">&quot;rootDir&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./src&quot;</span> <span class="token comment">/* Specify the root folder within your source files. */</span><span class="token punctuation">,</span>
<span class="token property">&quot;outDir&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./dist&quot;</span> <span class="token comment">/* Specify an output folder for all emitted files. */</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>webpack.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;html-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.ts$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">&quot;ts-loader&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">resolve</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// è‡ªå®šä¹‰è§£æé¡ºåºï¼Œä¼˜å…ˆè§£æts</span>
    <span class="token literal-property property">extensions</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;.ts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.js&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-å¤šé¡µé¢åº”ç”¨" tabindex="-1"><a class="header-anchor" href="#_4-å¤šé¡µé¢åº”ç”¨" aria-hidden="true">#</a> 4. å¤šé¡µé¢åº”ç”¨</h2><h3 id="_4-1-entryé…ç½®" tabindex="-1"><a class="header-anchor" href="#_4-1-entryé…ç½®" aria-hidden="true">#</a> 4.1 entryé…ç½®</h3><ul><li><p>åŸºç¡€ä½¿ç”¨</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">entry</span><span class="token operator">:</span> &quot;<span class="token punctuation">.</span><span class="token operator">/</span>src<span class="token operator">/</span>app<span class="token punctuation">.</span>jsâ€œ
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p><strong>å°†å¤šä¸ªä¸ç›¸å…³æ–‡ä»¶æ‰“åŒ…åˆ°ä¸€ä¸ªbundleä¸­ï¼Œæ•°ç»„é¡ºåºå³æ‰“åŒ…é¡ºåº</strong></p><p>é™¤äº†åŠ è½½æœ¬åœ°çš„æ¨¡å—ï¼Œè¿˜å¯ä»¥åŠ è½½node_modulesä¸‹çš„ç¬¬ä¸‰æ–¹æ¨¡å—</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;./src/app.js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;./src/app2.js&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;lodash&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>å¤šå…¥å£</p><p><strong>æ­¤æ—¶ï¼Œå¦‚æœmainé‡Œçš„æ–‡ä»¶å¼•ç”¨äº†lodashï¼Œlodashä¼šè¢«é‡å¤æ‰“åŒ…ï¼Œéœ€è¦dependOnå£°æ˜ä¾èµ–</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">main</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;./src/app.js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;./src/app2.js&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">lodash</span><span class="token operator">:</span> <span class="token string">&quot;lodash&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>å¤šå…¥å£ï¼Œå£°æ˜ä¾èµ–</p><p><strong>dependOnæŒ‡å‘çš„æ˜¯entryé‡Œå®šä¹‰çš„é”®åè€Œä¸æ˜¯å€¼</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">main</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword">import</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;./src/app.js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;./src/app2.js&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token comment">// mainå†…éƒ¨æ‰“åŒ…çš„æ–‡ä»¶å¯èƒ½ä¾èµ–äºlodashï¼Œè€Œlodashå·²ç»è¢«å•ç‹¬æ‰“åŒ…ï¼Œä¸éœ€è¦å†mainå†æ‰“åŒ…</span>
      <span class="token literal-property property">dependOn</span><span class="token operator">:</span> <span class="token string">&quot;lodash&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">lodash</span><span class="token operator">:</span> <span class="token string">&quot;lodash&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="_4-2-è‡ªå®šä¹‰htmlæ¨¡ç‰ˆé…ç½®" tabindex="-1"><a class="header-anchor" href="#_4-2-è‡ªå®šä¹‰htmlæ¨¡ç‰ˆé…ç½®" aria-hidden="true">#</a> 4.2 è‡ªå®šä¹‰htmlæ¨¡ç‰ˆé…ç½®</h3><h4 id="html-webpack-plugin" tabindex="-1"><a class="header-anchor" href="#html-webpack-plugin" aria-hidden="true">#</a> html-webpack-plugin</h4><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// å¯ä»¥å°†index.htmlä¸­çš„å†…å®¹åœ¨webpack.config.jsä¸­å®šä¹‰</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;SPA APP&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">&quot;./index.html&quot;</span><span class="token punctuation">,</span>
      <span class="token comment">// å®šä¹‰æ‰“åŒ…æ–‡ä»¶çš„å¼•å…¥ä½ç½®</span>
      <span class="token literal-property property">inject</span><span class="token operator">:</span> <span class="token string">&quot;body&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>index.html</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>&lt;%= htmlWebpackPlugin.options.title %&gt;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>htmlWebpackPluginæ’ä»¶æä¾›äº†å¯¹è±¡htmlWebpackPluginï¼Œå¯ä»¥åœ¨htmlä¸­è¯»å–åˆ°webpack.config.jsä¸­é…ç½®çš„å€¼</p><h4 id="å¤šé¡µé¢è½½å…¥ä¸åŒchunk" tabindex="-1"><a class="header-anchor" href="#å¤šé¡µé¢è½½å…¥ä¸åŒchunk" aria-hidden="true">#</a> å¤šé¡µé¢è½½å…¥ä¸åŒchunk</h4><p>é€šè¿‡chunkså±æ€§è‡ªå®šä¹‰éœ€è¦å¼•å…¥çš„chunk</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// chunkå³entryä¸­é…ç½®çš„é¡¹,é»˜è®¤ä¼šå¼•å…¥å…¨éƒ¨chunk</span>
      <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;main&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3-å¤šé¡µé¢ç¯å¢ƒæ­å»º" tabindex="-1"><a class="header-anchor" href="#_4-3-å¤šé¡µé¢ç¯å¢ƒæ­å»º" aria-hidden="true">#</a> 4.3 å¤šé¡µé¢ç¯å¢ƒæ­å»º</h3><p><strong>é»˜è®¤new ä¸€ä¸ªHtmlWebpackPluginï¼Œä¼šå°†æ‰€æœ‰çš„entryç”Ÿæˆåˆ°ä¸€ä¸ªhtmlæ–‡ä»¶ä¸­ï¼Œæ ¹æ®chunkså±æ€§å¯¹åº”åŠ è½½chunk</strong></p><p><strong>å¦‚æœä¸æŒ‡å®šchunksï¼Œé»˜è®¤ä¸¤ä¸ªHtmlWebpackPluginå¯¹åº”ç”Ÿæˆçš„htmlä¼šåŠ è½½å…¨éƒ¨ä»chunk</strong>ã€‚</p><p>newå¤šä¸ªHtmlWebpackPluginï¼ŒæŒ‡å®šç”Ÿæˆä¸åŒçš„æ¨¡æ¿</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// å¯ä»¥å°†index.htmlä¸­çš„å†…å®¹åœ¨webpack.config.jsä¸­å®šä¹‰</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;SPA APP&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">&quot;./index.html&quot;</span><span class="token punctuation">,</span>
      <span class="token comment">// å®šä¹‰æ‰“åŒ…æ–‡ä»¶çš„å¼•å…¥ä½ç½®</span>
      <span class="token literal-property property">inject</span><span class="token operator">:</span> <span class="token string">&quot;body&quot;</span><span class="token punctuation">,</span>
      <span class="token comment">// chunkå³entryä¸­é…ç½®çš„é¡¹,é»˜è®¤ä¼šå¼•å…¥å…¨éƒ¨chunk</span>
      <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;main&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;lodash&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;chanel1/index.html&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token string">&quot;http://www.a.com/&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">&quot;./index2.html&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">inject</span><span class="token operator">:</span> <span class="token string">&quot;body&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;main2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;lodash&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;chanel2/index2.html&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token string">&quot;http://www.b.com/&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-tree-shaking" tabindex="-1"><a class="header-anchor" href="#_5-tree-shaking" aria-hidden="true">#</a> 5. Tree Shaking</h2><h3 id="_5-1-å®šä¹‰" tabindex="-1"><a class="header-anchor" href="#_5-1-å®šä¹‰" aria-hidden="true">#</a> 5.1 å®šä¹‰</h3><p><strong>Tree shakingæŒ‡ç§»å‡ºjsä¸Šä¸‹æ–‡ä¸­æœªä½¿ç”¨çš„ä»£ç </strong>ï¼Œè¿™äº›æœªå¼•ç”¨ä»£ç ç§°ä¸ºdead codeã€‚å®ƒä¸»è¦ä¾èµ–äºES6çš„é™æ€ç»“æ„ç‰¹æ€§ï¼Œå¦‚importå’Œexport</p><p>**webpack2å†…ç½®äº†ES6æ¨¡å—å’Œæœªä½¿ç”¨æ¨¡å—æ£€æµ‹èƒ½åŠ›ï¼Œwebpack4ç»§ç»­ç»§æ‰¿äº†è¿™äº›èƒ½åŠ›ã€‚é€šè¿‡webpack.config.jsçš„side effectså±æ€§ï¼Œå‘compileræç¤ºï¼Œè¡¨æ˜å“ªäº›æ¨¡å—æ˜¯çº¯ES6æ¨¡å—ï¼Œæ¥å®‰å…¨åœ°åˆ é™¤æ–‡ä»¶ä¸­æœªä½¿ç”¨çš„æ¨¡å—ã€‚**åªä¼šä¿ç•™ä½¿ç”¨äº†çš„ä»£ç ï¼Œå³ä½¿å¯¼å…¥æœªå¼•ç”¨ä¹Ÿä¼šè¢«åˆ é™¤ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js</span>
<span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">usedExports</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-2-sideeffects" tabindex="-1"><a class="header-anchor" href="#_5-2-sideeffects" aria-hidden="true">#</a> 5.2 sideEffects</h3><p>webpackæ˜¯æ— æ³•100%è¿›è¡Œtree shakingçš„ï¼Œæœ‰äº›ä»£ç åªè¦å¯¼å…¥å°±ä¼šå¯¹åº”ç”¨äº§ç”Ÿå½±å“ï¼Œå¦‚å…¨å±€çš„æ ·å¼è¡¨ç­‰**ã€‚è¿™äº›æ–‡ä»¶æ˜¯æœ‰å‰¯ä½œç”¨çš„ï¼ŒWebpackè®¤ä¸ºå…·æœ‰å‰¯ä½œç”¨çš„æ–‡ä»¶æ˜¯ä¸åº”è¯¥è¿›è¡Œtree shakingçš„**ã€‚åœ¨ä¸çŸ¥é“å“ªäº›æ–‡ä»¶æœ‰å‰¯ä½œç”¨çš„æ—¶å€™ï¼Œæ˜¯ä¸èƒ½è¿›è¡Œæ‰“åŒ…çš„ã€‚</p><p>webpack4è§†æ‰€æœ‰ä»£ç æ˜¯æœ‰å‰¯ä½œç”¨çš„ï¼Œå…äºåˆ é™¤ä¸€äº›å¿…è¦çš„æ–‡ä»¶ï¼Œä¹Ÿå°±å¯¼è‡´Webpacké»˜è®¤æ˜¯ä¸è¿›è¡Œtree shakingçš„ã€‚</p><p><strong>webpack5é»˜è®¤æ˜¯è¿›è¡Œtree shakingçš„ï¼Œéœ€è¦sideEffectså‘ŠçŸ¥å“ªäº›ä»£ç æ˜¯å…·æœ‰å‰¯ä½œç”¨çš„ï¼Œå®ƒçš„å¯ä»¥ä¸ºtrueï¼Œfalseæˆ–æ•°ç»„ã€‚</strong></p><ul><li>&quot;sideEffects&quot;: trueï¼Œæ‰€æœ‰çš„ä»£ç éƒ½æ˜¯æœ‰å‰¯ä½œç”¨çš„</li><li>&quot;sideEffects&quot;: falseï¼Œæ‰€æœ‰çš„ä»£ç éƒ½æ˜¯æ²¡æœ‰å‰¯ä½œç”¨çš„</li><li>&quot;sideEffects&quot;: []ï¼Œå¯ä»¥è‡ªå®šä¹‰å“ªäº›æ–‡ä»¶æ˜¯æœ‰å‰¯ä½œç”¨çš„</li></ul><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token comment">// package.json</span>
<span class="token property">&quot;sideEffects&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;*.css&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;*.global.js&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-æ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åºpwa" tabindex="-1"><a class="header-anchor" href="#_6-æ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åºpwa" aria-hidden="true">#</a> 6. æ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åºPWA</h2><h3 id="_6-1-éç¦»çº¿ç¯å¢ƒä¸‹è¿è¡Œ" tabindex="-1"><a class="header-anchor" href="#_6-1-éç¦»çº¿ç¯å¢ƒä¸‹è¿è¡Œ" aria-hidden="true">#</a> 6.1 éç¦»çº¿ç¯å¢ƒä¸‹è¿è¡Œ</h3><p>æ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åºPWAï¼Œæ˜¯ä¸€ç§å¯ä»¥æä¾›ç±»ä¼¼åŸç”Ÿåº”ç”¨ç¨‹åºä½“éªŒçš„web appsï¼Œå³åœ¨æµè§ˆå™¨ç«¯å®ç°ç±»ä¼¼åŸç”Ÿåº”ç”¨ç¨‹åºçš„ä½“éªŒã€‚æœ€ä¸»è¦çš„åŠŸèƒ½æ˜¯åœ¨ç¦»çº¿ç¯å¢ƒä¸‹ç»§ç»­è¿è¡Œçš„åŠŸèƒ½ã€‚</p><p>é€šå¸¸æƒ…å†µä¸‹ï¼ŒçœŸæ­£çš„ç”¨æˆ·æ˜¯é€šè¿‡ç½‘ç»œè®¿é—®web app;ç”¨æˆ·çš„æµè§ˆå™¨ä¼šä¸ä¸€ä¸ªæä¾›æ‰€éœ€èµ„æºï¼ˆä¾‹å¦‚,.htmlï¼Œ .js å’Œ .cssæ–‡ä»¶)çš„ serveré€šè®¯ã€‚</p><p>æˆ‘ä»¬é€šè¿‡æ­å»ºä¸€ä¸ªæ‹¥æœ‰æ›´å¤šåŸºç¡€ç‰¹æ€§çš„serveræ¥æµ‹è¯•è¿™ç§ç¦»çº¿ä½“éªŒã€‚è¿™é‡Œä½¿ç”¨http-server packageï¼Œè¿˜è¦ä¿®æ”¹package.jsonçš„scripts</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm i http-server -D
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>package.json</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http-server dist&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>webpack-dev-server åˆ›å»ºçš„æœåŠ¡æ˜¯åœ¨çº¿çš„ï¼Œå¯åŠ¨æ—¶ï¼Œç¼–è¯‘çš„ä»£ç éƒ½æ”¾åœ¨å†…å­˜é‡Œï¼Œä¿®æ”¹ä»£ç æ— æ³•å°†ä»£ç é‡æ–°æ‰“åŒ…ç”Ÿæˆåˆ°disté‡Œã€‚éœ€è¦å¼€å¯writeToDistå±æ€§ï¼Œè®©http-serverå¤„ç†./distçš„æ–‡ä»¶</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">devMiddleware</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">writeToDist</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœä½ ä¹‹å‰æ²¡æœ‰æ“ä½œè¿‡ï¼Œå…ˆå¾—è¿è¡Œå‘½ä»¤npm run build æ¥æ„å»ºä½ çš„é¡¹ç›®ã€‚ç„¶åè¿è¡Œå‘½ä»¤npm start</p><h3 id="_6-2-workbox" tabindex="-1"><a class="header-anchor" href="#_6-2-workbox" aria-hidden="true">#</a> 6.2 workbox</h3><p>å®‰è£…æ’ä»¶</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm i workbox-webpack-plugin -D
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>webpack.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> WorkboxPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;workbox-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">WorkboxPlugin<span class="token punctuation">.</span>GenerateSW</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// å¿«é€Ÿå¯åŠ¨ ServiceWorkers</span>
      <span class="token literal-property property">clientsClaim</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token comment">// ä¸å…è®¸é—ç•™æ—§çš„ServiceWorkers</span>
      <span class="token literal-property property">skipWaiting</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨æ‰“åŒ…ä¼šç”Ÿæˆservice-worker.jså’Œworkbox.å“ˆå¸Œå€¼.jsæ–‡ä»¶ï¼Œå‰è€…æ˜¯ä¸»æ–‡ä»¶ï¼Œåè€…æ˜¯è¢«å¼•ç”¨çš„æ–‡ä»¶ã€‚å½“å‰å·²ç»åˆ›å»ºäº†work boxï¼Œä½†è¿˜æœªåœ¨æµè§ˆå™¨æ³¨å†Œservice workerï¼Œæ•…è¿˜æ— æ³•ä½¿ç”¨ã€‚</p><h3 id="_6-3-æ³¨å†Œservice-worker" tabindex="-1"><a class="header-anchor" href="#_6-3-æ³¨å†Œservice-worker" aria-hidden="true">#</a> 6.3 æ³¨å†Œservice worker</h3><p>index.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// åˆ¤æ–­æ˜¯å¦æ”¯æŒservice worker</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;serviceWorker&quot;</span> <span class="token keyword">in</span> navigator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;enter&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;load&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// è¿”å›çš„æ˜¯ä¸ªæ³¨å†ŒæˆåŠŸçš„promiseå¯¹è±¡</span>
    navigator<span class="token punctuation">.</span>serviceWorker
      <span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;/service-worker.js&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">registration</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;æ³¨å†ŒæˆåŠŸ&quot;</span><span class="token punctuation">,</span> registration<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">registrationError</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>registrationError<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_7-shimming-é¢„ç½®ä¾èµ–" tabindex="-1"><a class="header-anchor" href="#_7-shimming-é¢„ç½®ä¾èµ–" aria-hidden="true">#</a> 7. shimming é¢„ç½®ä¾èµ–</h2><h3 id="_7-1-shimmingé¢„ç½®å…¨å±€å˜é‡" tabindex="-1"><a class="header-anchor" href="#_7-1-shimmingé¢„ç½®å…¨å±€å˜é‡" aria-hidden="true">#</a> 7.1 shimmingé¢„ç½®å…¨å±€å˜é‡</h3><p>webpack compilerèƒ½å¤Ÿè¯†åˆ«ES6çš„æ¨¡å—ï¼Œç„¶è€Œç¬¬ä¸‰æ–¹çš„åº“å¯èƒ½ä¼šå»å¼•ç”¨ä¸€äº›å…¨å±€çš„ä¾èµ–ï¼Œè¿™äº›åº“å¯èƒ½ä¼šåˆ›å»ºä¸€äº›å¯¼å‡ºçš„å…¨å±€å˜é‡ã€‚</p><p>shimå¦ä¸€ä¸ªæå…¶æœ‰ç”¨çš„ä½œç”¨ï¼Œåˆ©ç”¨polyfillæ‰©å±•èƒ½åŠ›æ”¯æŒæ›´å¤šç”¨æˆ·æ—¶ï¼ŒæŒ‰éœ€åŠ è½½ã€‚</p><p>å‡ºäºæ¼”ç¤ºç›®çš„ï¼Œä¾‹å¦‚æŠŠè¿™ä¸ªåº”ç”¨ç¨‹åºä¸­çš„æ¨¡å—ä¾èµ–ï¼Œæ”¹ä¸ºä¸€ä¸ª<strong>å…¨å±€å˜é‡ä¾èµ–</strong>ã€‚è¦å®ç°è¿™äº›ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ ProvidePluginæ’ä»¶ã€‚</p><p><strong>ä½¿ç”¨ProvidePluginåï¼Œèƒ½å¤Ÿåœ¨Webpackç¼–è¯‘çš„æ¯ä¸ªæ¨¡å—ä¸­ï¼Œé€šè¿‡è®¿é—®ä¸€ä¸ªå˜é‡æ¥è·å–ä¸€ä¸ªpackageã€‚å¦‚æœwebpackçœ‹åˆ°æ¨¡å—ä¸­å¼•ç”¨è¿™ä¸ªå˜é‡ï¼Œå°±ä¼šåœ¨æœ€ç»ˆçš„bundleä¸­å¼•å…¥ç»™å®šçš„packageã€‚</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// è®¾ç½®å…¨å±€æ¨¡å—</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProvidePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">_</span><span class="token operator">:</span> <span class="token string">&quot;lodash&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¤æ—¶lodashå°±ä¸ç”¨importï¼Œå¯ä»¥ä½œä¸ºå…¨å±€æ¨¡å—ç›´æ¥ä½¿ç”¨äº†</strong></p><h3 id="_7-2-ç»†ç²’åº¦-shimming" tabindex="-1"><a class="header-anchor" href="#_7-2-ç»†ç²’åº¦-shimming" aria-hidden="true">#</a> 7.2 ç»†ç²’åº¦ shimming</h3><p>ä¸€äº›é—ç•™æ¨¡å—ä¾èµ–çš„ this æŒ‡å‘çš„æ˜¯ windowå¯¹è±¡ã€‚å½“æ¨¡å—è¿è¡Œåœ¨CommonJSä¸Šä¸‹æ–‡ä¸­ï¼Œè¿™å°†ä¼šå˜æˆä¸€ä¸ªé—®é¢˜ï¼Œä¹Ÿå°±æ˜¯è¯´æ­¤æ—¶çš„ this æŒ‡å‘çš„æ˜¯module.exportsã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ <strong>å¯ä»¥é€šè¿‡ä½¿ç”¨imports-loader è¦†ç›–this æŒ‡å‘</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm i imports-loader -D
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;./src/index.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">// thisæŒ‡å‘äº†window</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">&quot;imports-loader?wrapper=window&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-3-å…¨å±€expots" tabindex="-1"><a class="header-anchor" href="#_7-3-å…¨å±€expots" aria-hidden="true">#</a> 7.3 å…¨å±€expots</h3><p>æŸä¸ªlibraryåˆ›å»ºå‡ºä¸€ä¸ªå…¨å±€å˜é‡ï¼Œå…¶ä»–consumerä½¿ç”¨è¿™ä¸ªå˜é‡ã€‚å¯ä»¥åœ¨é¡¹ç›®é…ç½®ä¸­ï¼Œæ·»åŠ ä¸€ä¸ªå°æ¨¡å—æ¥æ¼”ç¤ºè¯´æ˜</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm i exports-loader -D
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>globals.jsæŒ‡çš„æ˜¯å¤–éƒ¨çš„æ–‡ä»¶ï¼Œä¸€èˆ¬ä¸çŸ¥é“æ˜¯å¦‚ä½•å¯¼å‡ºçš„ï¼Œæ‰€ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­å»å®šä¹‰ä¸€äº›å¯¼å‡ºï¼Œä»è€Œå¯ä»¥å•ç‹¬åœ°ä½¿ç”¨ä¸€äº›æ¨¡å—</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;./src/globals.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">// æŒ‰ç…§commonjsçš„æ–¹å¼å¯¼å‡ºä¸€ä¸ªfileå˜é‡</span>
        <span class="token comment">// multipleè¡¨ç¤ºå¯¼å‡ºä¸€ä¸ªkey-valueç±»å‹çš„</span>
        <span class="token comment">// helpers.parseä¸ºå€¼ï¼Œparseä¸ºé”®</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">&quot;exports-loader?type=commonjs&amp;exports=file,multiple|helpers.parse|parse&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-4-polyfills" tabindex="-1"><a class="header-anchor" href="#_7-4-polyfills" aria-hidden="true">#</a> 7.4 polyfills</h3><p>æœ‰å¾ˆå¤šæ–¹æ³•æ¥åŠ è½½ polyfillã€‚ä¾‹å¦‚ï¼Œæƒ³è¦å¼•å…¥ababel/polyfill æˆ‘ä»¬åªéœ€å¦‚ä¸‹æ“ä½œ:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm install @babel/polyfill -S
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç„¶åï¼Œä½¿ç”¨importå°†å…¶å¼•å…¥åˆ°æˆ‘ä»¬çš„ä¸»bundleæ–‡ä»¶:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token string">&quot;@babel/polyfill&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span>ï¼Œ<span class="token number">2</span>ï¼Œ<span class="token number">3</span><span class="token punctuation">]</span>ï¼Œxâ†’x<span class="token operator">+</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼Œ**è¿™ç§æ–¹å¼ä¼˜å…ˆè€ƒè™‘æ­£ç¡®æ€§ï¼Œè€Œä¸è€ƒè™‘ bundleä½“ç§¯å¤§å°ã€‚ä¸ºäº†å®‰å…¨å’Œå¯é ,polyfill/shimå¿…é¡»è¿è¡Œäºæ‰€æœ‰å…¶ä»–ä»£ç ä¹‹å‰ï¼Œè€Œä¸”éœ€è¦åŒæ­¥åŠ è½½ï¼Œæˆ–è€…è¯´ï¼Œéœ€è¦åœ¨æ‰€æœ‰polyfill/shim åŠ è½½ä¹‹åï¼Œå†å»åŠ è½½æ‰€æœ‰åº”ç”¨ç¨‹åºä»£ç ã€‚**ç¤¾åŒºä¸­å­˜åœ¨è®¸å¤šè¯¯è§£ï¼Œå³ç°ä»£æµè§ˆå™¨â€ä¸éœ€è¦â€œpolyfillï¼Œæˆ–è€…polyfill/shimä»…ç”¨äºæ·»åŠ ç¼ºå¤±åŠŸèƒ½ã€‚å®é™…ä¸Šï¼Œ<strong>å®ƒä»¬é€šå¸¸ç”¨äºä¿®å¤æŸåå®ç°</strong>ï¼Œå³ä½¿æ˜¯åœ¨æœ€ç°ä»£çš„æµè§ˆå™¨ä¸­ï¼Œä¹Ÿä¼šå‡ºç°è¿™ç§æƒ…å†µã€‚å› æ­¤ï¼Œ<strong>æœ€ä½³å®è·µä»ç„¶æ˜¯ï¼Œä¸åŠ é€‰æ‹©åœ°å’ŒåŒæ­¥åœ°åŠ è½½æ‰€æœ‰ polyfill/shimï¼Œå°½ç®¡è¿™ä¼šå¯¼è‡´é¢å¤–çš„ bundleä½“ç§¯æˆæœ¬</strong>ã€‚</p><h3 id="_7-5-ä¼˜åŒ–polyfill" tabindex="-1"><a class="header-anchor" href="#_7-5-ä¼˜åŒ–polyfill" aria-hidden="true">#</a> 7.5 ä¼˜åŒ–polyfill</h3><p><strong>ä¸å»ºè®®ä½¿ç”¨import ababel/polyfilllã€‚å› ä¸ºè¿™æ ·åšçš„ç¼ºç‚¹æ˜¯ä¼šå…¨å±€å¼•å…¥æ•´ä¸ªpolyfillåŒ…ã€‚ä¸ä½†åŒ…çš„ä½“ç§¯å¤§,è€Œä¸”è¿˜ä¼šæ±¡æŸ“å…¨å±€ç¯å¢ƒã€‚</strong></p><p>babel-preset-env packageé€šè¿‡ browserslist æ¥è½¬è¯‘é‚£äº›ä½ æµè§ˆå™¨ä¸­ä¸æ”¯æŒçš„ç‰¹æ€§ã€‚<strong>è¿™ä¸ªpresetä½¿ç”¨useBuiltInsé€‰é¡¹ï¼Œé»˜è®¤å€¼æ˜¯ falseï¼Œè¿™ç§æ–¹å¼å¯ä»¥å°†å…¨å±€ babel-polyfillå¯¼å…¥ï¼Œæ”¹è¿›ä¸ºæ›´ç»†ç²’åº¦çš„importæ ¼å¼:</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm i babel-loader @babel/core @babel/preset-env core-js@3 -D
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&quot;babel-loader&quot;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token punctuation">[</span>
                <span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>
                  <span class="token comment">// browserListé‡Œå®šä¹‰çš„å†…å®¹</span>
                  <span class="token literal-property property">targets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;last 1 version&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&gt; 1%&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                  <span class="token literal-property property">useBuiltIns</span><span class="token operator">:</span> <span class="token string">&quot;usage&quot;</span><span class="token punctuation">,</span>
                  <span class="token literal-property property">corejs</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
              <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ­¤æ—¶å°±æ— éœ€åœ¨ä»£ç ä¸­import @babel/polyfilläº†</p><h2 id="_8-library" tabindex="-1"><a class="header-anchor" href="#_8-library" aria-hidden="true">#</a> 8. Library</h2><h3 id="_8-1-æ„å»ºlibrary" tabindex="-1"><a class="header-anchor" href="#_8-1-æ„å»ºlibrary" aria-hidden="true">#</a> 8.1 æ„å»ºlibrary</h3><p>webpacké™¤äº†æ‰“åŒ…åº”ç”¨ç¨‹åºå¤–ï¼Œè¿˜å¯ä»¥ç”¨æ¥æ‰“åŒ…JavaScript Libraryã€‚</p><h4 id="scriptæ ‡ç­¾" tabindex="-1"><a class="header-anchor" href="#scriptæ ‡ç­¾" aria-hidden="true">#</a> scriptæ ‡ç­¾</h4><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;mylib.js&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">library</span><span class="token operator">:</span> <span class="token string">&quot;mylib&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- mylibä¼šç»‘åœ¨windowå¯¹è±¡ä¸Š --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>../dist/mylib.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mylib<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶è€Œå®ƒåªèƒ½é€šè¿‡è¢«scriptæ ‡ç­¾å¼•ç”¨è€Œå‘æŒ¥ä½œç”¨ï¼Œå®ƒä¸èƒ½è¿è¡Œåœ¨CommonJSã€AMDã€Node.,jsç­‰ç¯å¢ƒä¸­ã€‚</p><h4 id="commonjs-module" tabindex="-1"><a class="header-anchor" href="#commonjs-module" aria-hidden="true">#</a> CommonJs module</h4><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;mylib.js&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">library</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;mylib&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;commonjs&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> webpackNumbers <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span> <span class="token string">&#39;webpack-numbers &#39;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
webpackNumbers<span class="token punctuation">.</span><span class="token function">wordToNum</span><span class="token punctuation">(</span> <span class="token string">&#39;Two &#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹</p><h4 id="amd-module" tabindex="-1"><a class="header-anchor" href="#amd-module" aria-hidden="true">#</a> AMD module</h4><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">require</span><span class="token punctuation">(</span> <span class="token punctuation">[</span> <span class="token string">&#39; webpackNumbers &#39;</span><span class="token punctuation">]</span>ï¼Œ<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">webpackNumbers</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    webpackNumbers<span class="token punctuation">.</span><span class="token function">wordToNum</span><span class="token punctuation">(</span> <span class="token string">&#39;Two &#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// æˆ–</span>
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;module&quot;</span><span class="token operator">&gt;</span>
      <span class="token keyword">import</span> <span class="token punctuation">{</span> add <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../dist/mylib.js&quot;</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">experiments</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">outputModule</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;mylib.js&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">library</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">//   name: &quot;mylib&quot;,</span>
      <span class="token comment">// å½“type=moduleæ—¶ï¼Œnameæ˜¯ä¸èƒ½è®¾ç½®çš„</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="umd" tabindex="-1"><a class="header-anchor" href="#umd" aria-hidden="true">#</a> UMD</h4><p>å¯ä»¥æ”¯æŒscriptæ ‡ç­¾ï¼ŒcommonJSå’ŒAMDã€‚å¯¹äºES moduleçš„çš„æ”¯æŒå°šä¸å®Œå–„</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//   experiments: { outputModule: true },</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;mylib.js&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">library</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;mylib&quot;</span><span class="token punctuation">,</span>
      <span class="token comment">// å½“type=moduleæ—¶ï¼Œnameæ˜¯ä¸èƒ½è®¾ç½®çš„</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;umd&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// ç”¨å…¨å±€çš„thisä»£æ›¿self</span>
    <span class="token literal-property property">globalObject</span><span class="token operator">:</span> <span class="token string">&quot;globalThis&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8-2-æ„å»ºè½®å­" tabindex="-1"><a class="header-anchor" href="#_8-2-æ„å»ºè½®å­" aria-hidden="true">#</a> 8.2 æ„å»ºè½®å­</h3><p>åœ¨distä¸‹å°±æ‰“åŒ…å¥½äº†webpack-number.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;webpack-numbers.js&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">library</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;webpackNumbers&quot;</span><span class="token punctuation">,</span>
      <span class="token comment">// å½“type=moduleæ—¶ï¼Œnameæ˜¯ä¸èƒ½è®¾ç½®çš„</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;umd&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// ç”¨å…¨å±€çš„thisä»£æ›¿self</span>
    <span class="token literal-property property">globalObject</span><span class="token operator">:</span> <span class="token string">&quot;globalThis&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">externals</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">lodash</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">commonjs</span><span class="token operator">:</span> <span class="token string">&quot;lodash&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">commonjs2</span><span class="token operator">:</span> <span class="token string">&quot;lodash&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">amd</span><span class="token operator">:</span> <span class="token string">&quot;lodash&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token string">&quot;_&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8-3-å‘å¸ƒnpm-package" tabindex="-1"><a class="header-anchor" href="#_8-3-å‘å¸ƒnpm-package" aria-hidden="true">#</a> 8.3 å‘å¸ƒnpm-package</h3><ol><li><p>ç™»å½•<a href="https://www.npmjs.com/" target="_blank" rel="noopener noreferrer">https://www.npmjs.com/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>, æ‰“å¼€æˆ‘çš„packages</p></li><li><p>åœ¨å‘½ä»¤è¡Œè¾“å…¥ï¼Œç¡®ä¿è¿æ¥çš„æ˜¯å®˜ç½‘ <a href="https://registry.npmjs.org/" target="_blank" rel="noopener noreferrer">https://registry.npmjs.org/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm config get registry

// ä¿®æ”¹æºåœ°å€
npm config set registry http://registry.npmjs.org
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨ï¼šæ·˜å®é•œåƒä¸º<a href="https://registry.npm.taobao.org/" target="_blank" rel="noopener noreferrer">https://registry.npm.taobao.org/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li><li><p>ç™»å½•è´¦æˆ·ï¼Œè·³è½¬å®˜ç½‘ç™»å½•</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm adduser
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>ä¿®æ”¹package.jsonçš„å…¥å£ä¸ºæ‰“åŒ…åçš„å…¥å£</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dist/webpack-numbers.js&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>å‘½ä»¤è¡Œè¾“å…¥ï¼Œå‘å¸ƒåŒ…</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm publish
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ³¨ï¼špackage.jsonçš„versionéœ€è¦é«˜äºä¸Šä¸€æ¬¡çš„ç‰ˆæœ¬ï¼Œåˆæ¬¡å‘åŒ…ç‰ˆæœ¬è¦é«˜äº1.0.0ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼š400 Bad Request - PUT <a href="https://registry.npmjs.org/10-library" target="_blank" rel="noopener noreferrer">https://registry.npmjs.org/10-library<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> - Cannot publish over previously published version &quot;1.0.0&quot;.</p></li></ol><h2 id="_9-module-federationæ¨¡å—è”é‚¦" tabindex="-1"><a class="header-anchor" href="#_9-module-federationæ¨¡å—è”é‚¦" aria-hidden="true">#</a> 9. module federationæ¨¡å—è”é‚¦</h2><p>æ¨¡å—è”é‚¦å¯ä»¥é€šè¿‡webpack5å®ç°ä½¿ç”¨å…¶ä»–æ¨¡å—çš„èµ„æº</p><p><strong>remotesï¼šå¼•ç”¨çš„å¤–éƒ¨æ¨¡å—èµ„æº</strong>ï¼Œkeyæ˜¯å¼•ç”¨çš„æ¨¡å—åï¼ˆå³æ¨¡å—çš„nameï¼‰ï¼Œå€¼æ˜¯ name+è®¿é—®åœ°å€</p><p><strong>exposesï¼šå‘å¤–æš´éœ²çš„èµ„æºæ¨¡å—</strong>ï¼Œkeyæ˜¯è®¿é—®æ—¶å¼•ç”¨çš„è·¯å¾„ï¼Œå€¼æ˜¯å½“å‰æ¨¡å—ä¸‹çš„è·¯å¾„</p><p>search-webpack.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> ModuleFederationPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>container<span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">ModuleFederationPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;search&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;remoteEntry.js&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">exposes</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">remotes</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">nav</span><span class="token operator">:</span> <span class="token string">&quot;nav@http://localhost:3003/remoteEntry.js&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">home</span><span class="token operator">:</span> <span class="token string">&quot;home@http://localhost:3001/remoteEntry.js&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>nav- webpack.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> ModuleFederationPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>container<span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">ModuleFederationPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// åˆ«çš„ç»„ä»¶éœ€è¦é€šè¿‡nameè®¿é—®å½“å‰ç»„ä»¶</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;nav&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;remoteEntry.js&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">remotes</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">exposes</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// key:æ‹¼æ¥è·¯å¾„</span>
        <span class="token string-property property">&quot;./Header&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./src/Header.js&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// å…±äº«ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œä¼šè¢«å•ç‹¬æ‰“åŒ…</span>
      <span class="token literal-property property">shared</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>search-index.js</p><p><strong>å¼•ç”¨æ¨¡å—è”é‚¦ä¸‹çš„å…¶ä»–æ¨¡å—éœ€è¦å¼‚æ­¥å¼•å…¥ï¼Œå³ä½¿ç”¨import()å‡½æ•°å¯¼å…¥ï¼Œnavä¸ºå®šä¹‰çš„æ¨¡å—åï¼Œ/Headeræ˜¯navä¸­expopeså±æ€§å®šä¹‰çš„keyå€¼</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;nav/Header&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;home/HomeList&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token operator">:</span> Header <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token operator">:</span> HomeList <span class="token punctuation">}</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token function">Header</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>innerHTML <span class="token operator">+=</span> <span class="token function">HomeList</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_10-æå‡æ„å»ºæ€§èƒ½" tabindex="-1"><a class="header-anchor" href="#_10-æå‡æ„å»ºæ€§èƒ½" aria-hidden="true">#</a> 10. æå‡æ„å»ºæ€§èƒ½</h2><h3 id="_10-1-é€šç”¨æ„å»ºä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#_10-1-é€šç”¨æ„å»ºä¼˜åŒ–" aria-hidden="true">#</a> 10.1 é€šç”¨æ„å»ºä¼˜åŒ–</h3><p>webpackæ€§èƒ½æå‡é€šå¸¸æŒ‡</p><ul><li><p>é€šè¿‡webpackæå‡é¡¹ç›®æ€§èƒ½ï¼Œå¦‚é¦–å±åˆ°è¾¾æ—¶é—´</p></li><li><p>æé«˜webpackæ„å»ºç¼–è¯‘æ€§èƒ½ï¼Œæé«˜æ‰“åŒ…é€Ÿåº¦ï¼Œé™ä½æ‰“åŒ…æ—¶é—´</p></li></ul><p>webpack5çš„ä¼˜åŒ–åŒ…æ‹¬ä¸‰ä¸ªç¯å¢ƒï¼š</p><h4 id="é€šç”¨ç¯å¢ƒ" tabindex="-1"><a class="header-anchor" href="#é€šç”¨ç¯å¢ƒ" aria-hidden="true">#</a> é€šç”¨ç¯å¢ƒ</h4><ol><li><p><strong>æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬</strong>ï¼ŒåŒ…æ‹¬wabpackï¼ŒnodeJsï¼Œnpmï¼Œyarnã€‚è¾ƒæ–°çš„ç‰ˆæœ¬èƒ½å¤Ÿæ„å»ºæ›´é«˜æ•ˆçš„æ¨¡å—æ ‘ï¼Œä»¥åŠæé«˜è§£æé€Ÿåº¦ã€‚</p></li><li><p><strong>å°†loaderåº”ç”¨äºæœ€å°‘æ•°é‡çš„å¿…è¦æ¨¡å—</strong>ï¼Œå¦‚includeæŒ‡å®šç›®å½•ï¼Œexcludeæ’é™¤ä¸éœ€è¦çš„ç›®å½•</p></li><li><p><strong>å¼•å¯¼bootstrap</strong>ï¼Œæ¯ä¸ªé¢å¤–çš„loaderå’Œpluginéƒ½æœ‰å…¶å¯åŠ¨æ—¶é—´ï¼Œå°½å¯èƒ½å°‘ä½¿ç”¨å·¥å…·ã€‚</p></li><li><p><strong>è§£æ</strong>ï¼Œä»¥ä¸‹å¯ä»¥æå‡è§£æé€Ÿåº¦</p><ul><li><p>å‡å°‘resolve.modulesï¼Œresolve.extensionsï¼Œresolve.mainFilesï¼ŒresolvedescriptionFilesä¸­æ¡ç›®æ•°é‡ï¼Œå®ƒä»¬ä¼šå¢åŠ æ–‡ä»¶ç³»ç»Ÿçš„è°ƒç”¨æ¬¡æ•°</p></li><li><p>å¦‚æœä¸é€‚ç”¨symlinksï¼ˆå¦‚npm linkæˆ–yarn linkï¼‰ï¼Œå¯ä»¥è®¾ç½®resolve.symlinks:false</p></li><li><p>å¦‚æœä½¿ç”¨è‡ªå®šä¹‰resolve pluginè§„åˆ™ï¼Œå¹¶ä¸”æ²¡æœ‰æŒ‡å®šcontextä¸Šä¸‹æ–‡ï¼Œå¯ä»¥è®¾ç½®resolveã€‚cacheWithContext: false</p></li></ul></li><li><p><strong>å°å³å¿«ï¼šè¾ƒå°‘ç¼–è¯‘ç»“æœçš„æ•´ä½“å¤§å°ï¼Œå°½é‡ä¿æŒchunkä½“ç§¯å°</strong></p><ul><li>ä½¿ç”¨æ•°é‡æ›´å°‘/ä½“ç§¯æ›´å°çš„library</li><li>åœ¨SPAä¸­ä½¿ç”¨SplitChunksPlugin</li><li>åœ¨SPAä¸­ä½¿ç”¨SplitChunksPluginï¼Œå¹¶å¼€å¯sayncæ¨¡å¼</li><li>ç§»é™¤æœªä½¿ç”¨ä»£ç </li><li>åªç¼–è¯‘å½“å‰æ­£åœ¨å¼€å‘çš„ä»£ç </li></ul></li><li><p><strong>æŒä¹…åŒ–ç¼“å­˜</strong></p><p>åœ¨webpacké…ç½®ä¸­ä½¿ç”¨cacheé€‰é¡¹ï¼Œä½¿ç”¨package.jsonä¸­çš„â€œpostinstall&quot;æ¸…é™¤ç¼“å­˜ç›®å½•</p><p>å°†cacheç±»å‹è®¾ç½®ä¸ºå†…å­˜æˆ–æ–‡ä»¶ç³»ç»Ÿï¼Œmemoryé€‰é¡¹å‘Šè¯‰webpackåœ¨å†…å­˜ä¸­å­˜å‚¨ç¼“å­˜ï¼Œä¸å…è®¸é¢å¤–é…ç½®</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;memory&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>è‡ªå®šä¹‰plugin/loader</strong></p><p>è¦å¯¹å®ƒä»¬è¿›è¡Œæ¦‚è¦åˆ†æï¼Œä»¥å…å¼•å…¥æ€§èƒ½é—®é¢˜ã€‚</p></li><li><p><strong>process plugin</strong></p><p>å°†process pluginä»webpackä¸­åˆ é™¤ï¼Œå¯ä»¥ç¼©çŸ­æ„å»ºæ—¶é—´ã€‚æ³¨ï¼šprocess pluginå¯èƒ½ä¸ä¼šä¸ºå¿«é€Ÿæ„å»ºæä¾›å¤ªå¤šä»·å€¼ã€‚</p></li><li><p><strong>dll</strong></p><p>ddlæ˜¯ä¸€ä¸ªåŠ¨æ€é“¾æ¥çš„æŠ€æœ¯ï¼Œä½¿ç”¨dllPluginä¸ºæ›´æ”¹ä¸é¢‘ç¹çš„ä»£ç ç”Ÿæˆå•ç‹¬çš„ç¼–è¯‘ç»“æœï¼Œå¯ä»¥æå‡ç¼–è¯‘é€Ÿåº¦ï¼Œå°½ç®¡å¢åŠ äº†æ„å»ºè¿‡ç¨‹çš„å¤æ‚ç¨‹åº¦ã€‚</p><p>webpack.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DllReferencePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">manifest</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;./dll/manifest.json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>webpack.dll.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// é…ç½®çš„æ˜¯node_modulesé‡Œå®‰è£…çš„ç¬¬ä¸‰æ–¹çš„åŒ…</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">jquery</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;jquery&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;[name].js&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dll&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">library</span><span class="token operator">:</span> <span class="token string">&quot;[name]_[hash]&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DllPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;[name]_[hash]&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dll/manifest.json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>package.json</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;dll&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --config ./webpack.dll.config.js&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ‰§è¡Œè„šæœ¬ï¼Œä¼šç”Ÿæˆä¸€ä¸ªdllæ–‡ä»¶ï¼Œä¸‹é¢åŒ…æ‹¬æ‰“åŒ…å¥½çš„jqueryï¼Œlicenseæ–‡ä»¶å’Œmanifestæ–‡ä»¶ã€‚æ­¤åæ‰§è¡Œnpx webpackï¼Œæ‰“åŒ…æ—¶é—´ä¼šè¢«ç¼©çŸ­ï¼Œmanifestæ–‡ä»¶ä¼šå‘ŠçŸ¥å·²ç»æ‰“åŒ…å¥½çš„æ–‡ä»¶ï¼Œæ— éœ€å†æ¬¡æ‰“åŒ…ï¼Œä½¿å¾—æ‰“åŒ…äº§ç‰©ä½“ç§¯ç¼©å°ï¼Œç›´æ¥å¼•ç”¨æ‰“åŒ…å¥½çš„ddlç›®å½•ä¸‹çš„æ–‡ä»¶å³å¯ã€‚</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm run dll
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>ä»¥ä¸Šåªæ˜¯æä¾›äº†æ„å»ºæ•ˆç‡ï¼Œå®é™…ä¸Šæ‰“åŒ…çš„htmlä¸­åªå¼•ç”¨äº†æ‰“åŒ…å¥½çš„main.jsï¼Œå¹¶æœªå¼•å…¥dllä¸‹çš„æ‰“åŒ…äº§ç‰©ã€‚è¿˜éœ€è¦å¼•å…¥dllä¸‹çš„äº§ç‰©ã€‚</strong></p><p>å®‰è£…plugin</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm i add-asset-html-webpack-plugin -D
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> AddAssetHtmlPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;add-asset-html-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">AddAssetHtmlPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">filepath</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;./dll/jquery.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token string">&quot;./&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>worker pool</strong>ï¼ˆå¤šçº¿ç¨‹æ‰“åŒ…ï¼‰</p><p>thread-loaderå¯ä»¥å°†éå¸¸æ¶ˆè€—èµ„æºçš„loaderåˆ†æµç»™ä¸€ä¸ªwork poolã€‚<strong>thread-loaderå¯åŠ¨å¼€é”€è¾ƒå¤§ï¼Œåªé€‚åˆéå¸¸è€—æ—¶çš„loader</strong></p><p>å¯ä»¥å°†worker poolå®šä¹‰åœ¨loaderå‰é¢ï¼ŒæŠŠloaderæ”¾å…¥æŸä¸ªworker poolä¸­è¿è¡Œã€‚</p><p><strong>ä¸è¦ä½¿ç”¨å¤ªå¤šçš„workerï¼Œå› ä¸ºNode.jsçš„ runtimeå’Œloaderéƒ½æœ‰å¯åŠ¨å¼€é”€ã€‚æœ€å°åŒ– workerå’Œ main process(ä¸»è¿›ç¨‹)ä¹‹é—´çš„æ¨¡å—ä¼ è¾“ã€‚è¿›ç¨‹é—´é€šè®¯(IPC, inter process communication)æ˜¯éå¸¸æ¶ˆè€—èµ„æºçš„</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm i thread-loader -D
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&quot;babel-loader&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&quot;thread-loader&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token literal-property property">workers</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h4 id="å¼€å‘ç¯å¢ƒ" tabindex="-1"><a class="header-anchor" href="#å¼€å‘ç¯å¢ƒ" aria-hidden="true">#</a> å¼€å‘ç¯å¢ƒ</h4><ol><li><p><strong>å¢é‡ç¼–è¯‘</strong></p><p>ä½¿ç”¨webpackçš„watch modeï¼ˆç›‘å¬æ¨¡å¼ï¼‰ï¼Œè€Œä¸ä½¿ç”¨å…¶ä»–å·¥å…·æ¥watchæ–‡ä»¶å’Œè°ƒç”¨webpackã€‚å†…ç½®çš„watch modeä¼šè®°å½•æ—¶é—´æˆ³å¹¶å°†æ­¤ä¿¡æ¯ä¼ é€’ç»™compilationä»¥ä½¿ç¼“å­˜å¤±æ•ˆã€‚</p><p>æŸäº›é…ç½®ç¯å¢ƒä¸­ï¼Œwatch modeä¼šå›é€€åˆ°poll modeï¼ˆè½®è¯¢æ¨¡å¼ï¼‰ã€‚ç›‘å¬è®¸å¤šæ–‡ä»¶ä¼šå¯¼è‡´CPUå¤§é‡è´Ÿè½½ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨watchOptions.poll æ¥å¢åŠ è½®è¯¢çš„é—´éš”æ—¶é—´ã€‚</p></li><li><p><strong>åœ¨å†…å­˜ä¸­ç¼–è¯‘</strong></p><p>ä¸‹é¢å‡ ä¸ªå·¥å…·é€šè¿‡å’‹å†…å­˜ä¸­ï¼ˆè€Œä¸æ˜¯å†™å…¥ç£ç›˜ï¼‰ç¼–è¯‘å’Œserveèµ„æºæ¥æé«˜æ€§èƒ½</p><ul><li>webpack-dev-server</li><li>webpack-hot-middleware</li><li>webpack-dev-middleware</li></ul></li><li><p><strong>stats.toJsonåŠ é€Ÿ</strong></p><p>webpack4é»˜è®¤ä½¿ç”¨stats.toJson()è¾“å‡ºå¤§é‡æ•°æ®ï¼Œé™¤éåœ¨å¢é‡æ­¥éª¤ä¸­åšå¿…è¦çš„ç»Ÿè®¡ï¼Œå¦åˆ™è¯·é¿å…è·å–statså¯¹è±¡çš„éƒ¨åˆ†å†…å®¹ã€‚</p><p>webpack-dev-server åœ¨v3.1.3ä»¥åçš„ç‰ˆæœ¬ï¼ŒåŒ…å«ä¸€ä¸ªé‡è¦çš„æ€§èƒ½ä¿®å¤ï¼Œå³æœ€å°åŒ–æ¯ä¸ªå¢é‡æ„å»ºæ­¥éª¤ä¸­ï¼Œä»statså¯¹è±¡è·å–çš„æ•°æ®é‡ã€‚</p></li><li><p><strong>devtool</strong></p><p>éœ€è¦æ³¨æ„çš„æ˜¯ä¸åŒçš„devtoolè®¾ç½®ï¼Œä¼šå¯¼è‡´æ€§èƒ½å·®å¼‚ã€‚</p><ul><li>evalï¼šæ€§èƒ½æœ€å¥½ï¼Œä½†ä¸èƒ½è½¬è¯‘ä»£ç </li><li>cheap-source-mapï¼šè¾ƒå·®ä¸€ç‚¹çš„mapè´¨é‡</li><li>eval-source-mapï¼šå¢é‡ç¼–è¯‘</li></ul><p><strong>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæœ€ä½³é€‰æ‹©æ˜¯eval-cheap-module-source-map</strong></p></li><li><p><strong>é¿å…åœ¨ç”Ÿäº§ç¯å¢ƒæ‰ç”¨åˆ°çš„å·¥å…·</strong></p><p>æŸäº›utility, pluginå’Œloaderéƒ½åªç”¨äºç”Ÿäº§ç¯å¢ƒã€‚ä¾‹å¦‚ï¼Œåœ¨å¼€å‘ç¯å¢ƒä¸‹ä½¿ç”¨TerserPlugin æ¥ minify(å‹ç¼©)å’Œmangle(æ··æ·†ç ´å)ä»£ç ã€‚é€šå¸¸åœ¨å¼€å‘ç¯å¢ƒä¸‹ï¼Œåº”è¯¥æ’é™¤ä»¥ä¸‹è¿™äº›å·¥å…·âˆ¶</p><ul><li>TerserPlugin</li><li>[fullhash]/[chunkhash]/[contenthash].</li><li>AggressiveSplittingPlugin</li><li>.AggressiveMergingPlugin</li><li>ModuleConcatenationPlugin</li></ul></li><li><p><strong>æœ€å°åŒ–entry chunk</strong></p><p>Webpackåªä¼šåœ¨æ–‡ä»¶ç³»ç»Ÿä¸­è¾“å‡ºå·²ç»æ›´æ–°çš„chunkã€‚æŸäº›é…ç½®é€‰é¡¹ï¼ˆHMRï¼Œoutput.chunkFilename çš„[name]/[chunkhash]/[contenthash]ï¼Œ[fullhash]ï¼‰æ¥è¯´ï¼Œé™¤äº†å¯¹å·²ç»æ›´æ–°çš„ chunkæ— æ•ˆä¹‹å¤–ï¼Œå¯¹äºentry chunk ä¹Ÿä¸ä¼šç”Ÿæ•ˆã€‚</p><p>ç¡®ä¿åœ¨ç”Ÿæˆentry chunkæ—¶ï¼Œå°½é‡å‡å°‘å…¶ä½“ç§¯ä»¥æé«˜æ€§èƒ½ã€‚ä»¥ä¸‹é…ç½®ä¸ºè¿è¡Œæ—¶ä»£ç åˆ›å»ºäº†ä¸€ä¸ªé¢å¤–çš„chunkï¼Œæ‰€ä»¥ç”Ÿæˆä»£ä»·è¾ƒä½:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">optimization</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">runtimeChunk</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>é¿å…é¢å¤–çš„ä¼˜åŒ–æ­¥éª¤</strong></p><p>Webpacké€šè¿‡æ‰§è¡Œé¢å¤–çš„ç®—æ³•ä»»åŠ¡ï¼Œæ¥ä¼˜åŒ–è¾“å‡ºç»“æœçš„ä½“ç§¯å’ŒåŠ è½½æ€§èƒ½ã€‚è¿™äº›ä¼˜åŒ–é€‚ç”¨äºå°å‹ä»£ç åº“ï¼Œä½†æ˜¯åœ¨å¤§å‹ä»£ç åº“ä¸­å´éå¸¸è€—è´¹æ€§èƒ½</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>modules<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">optimizations</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">remoAvailabelModules</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token literal-property property">remoEmptyChunks</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>è¾“å‡ºç»“æœä¸æºå¸¦è·¯å¾„ä¿¡æ¯</strong></p><p>Webpack ä¼šåœ¨è¾“å‡ºçš„bundle ä¸­ç”Ÿæˆè·¯å¾„ä¿¡æ¯ã€‚ç„¶è€Œï¼Œåœ¨æ‰“åŒ…æ•°å¹²ä¸ªæ¨¡å—çš„é¡¹ç›®ä¸­ï¼Œè¿™ä¼šå¯¼è‡´é€ æˆåƒåœ¾å›æ”¶æ€§èƒ½å‹åŠ›ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">pathinfo</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>typescript loader</strong></p><p>å¯ä»¥ä¸ºloaderä¼ å…¥transpileOnlyé€‰é¡¹ï¼Œä»¥ç¼©çŸ­ä½¿ç”¨ts-loaderæ—¶çš„æ„å»ºæ—¶é—´ã€‚ä½¿ç”¨æ­¤é€‰é¡¹ï¼Œä¼šå…³é—­ç±»å‹æ£€æŸ¥ã€‚å¦‚æœè¦å†æ¬¡å¼€å¯ç±»å‹æ£€æŸ¥ï¼Œä½¿ç”¨ForkTsCheckerWebpackPluginã€‚ä½¿ç”¨æ­¤æ’ä»¶ä¼šå°†æ£€æŸ¥è¿‡ç¨‹ç§»è‡³å•ç‹¬çš„è¿›ç¨‹ï¼Œå¯ä»¥åŠ å¿«TypeScript çš„ç±»å‹æ£€æŸ¥å’Œ ESLintæ’å…¥çš„é€Ÿåº¦ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
            <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.tsx$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
            <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token punctuation">{</span>
                <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&quot;ts-loader&quot;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                  <span class="token literal-property property">transpileOnly</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h4 id="ç”Ÿäº§ç¯å¢ƒ" tabindex="-1"><a class="header-anchor" href="#ç”Ÿäº§ç¯å¢ƒ" aria-hidden="true">#</a> ç”Ÿäº§ç¯å¢ƒ</h4><ol><li><p><strong>ä¸å¯ç”¨source-map</strong></p><p>source-mapç›¸å½“æ¶ˆè€—èµ„æº</p></li></ol></div><!----><footer class="page-meta"><!----><div class="meta-item git-info"><div class="update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: 243...@qq.com">jiyunqq</span><!--]--><!--]--></div></div></footer><nav class="page-nav"><a href="/node/swagger.html" class="nav-link prev" aria-label="express ç”Ÿæˆæ¥å£æ–‡æ¡£"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->express ç”Ÿæˆæ¥å£æ–‡æ¡£</div></a><!----></nav><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">ä½†æ„¿äººé•¿ä¹…, åƒé‡Œå…±å©µå¨Ÿ</div><!----></footer></div><!--]--><!----><!----><!--]--></div>
    <script type="module" src="/assets/app-bc749043.js" defer></script>
  </body>
</html>
